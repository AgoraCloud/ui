var Es=Object.defineProperty,fs=Object.defineProperties;var ys=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var Re=(s,e,r)=>e in s?Es(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,h=(s,e)=>{for(var r in e||(e={}))st.call(e,r)&&Re(s,r,e[r]);if(ge)for(var r of ge(e))rt.call(e,r)&&Re(s,r,e[r]);return s},B=(s,e)=>fs(s,ys(e));var xe=(s,e)=>{var r={};for(var o in s)st.call(s,o)&&e.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&ge)for(var o of ge(s))e.indexOf(o)<0&&rt.call(s,o)&&(r[o]=s[o]);return r};var i=(s,e,r)=>(Re(s,typeof e!="symbol"?e+"":e,r),r);import{E as ws,o as F,c as We,m as q,l as P,a as ks,v as bs,b as R,d as Cs,e as W,f as p,r as t,A as ot,T as _e,S as vs,M as z,g as f,C as Ue,I as at,h as Ne,i as nt,j as it,k as Ee,n as H,B as D,F as Ss,p as Ie,q as _,s as Ps,L as N,D as te,t as se,u as Ds,w as re,x as Rs,y as Ws,z as T,G,H as _s,P as lt,J as Us,K as Ns,N as Is,O as ct,Q as pt,R as Os,U as Fs,V as dt,W as ut,X,Y as mt,Z as ht,_ as gt,$ as xt,a0 as Et,a1 as oe,a2 as Y,a3 as Oe,a4 as fe,a5 as Ts,a6 as Fe,a7 as As,a8 as Ms,a9 as Ls,aa as $s,ab as js,ac as Bs,ad as Te,ae as Gs,af as ae,ag as ft,ah as ne,ai as L,aj as Vs,ak as Ks,al as yt,am as zs,an as Hs,ao as Ys,ap as Js,aq as wt,ar as kt,as as k,at as bt,au as Zs,av as Q,aw as Ct,ax as qs,ay as C,az as vt,aA as St,aB as Xs,aC as Qs,aD as er,aE as Ae,aF as tr,aG as sr,aH as rr,aI as or,aJ as ar,aK as nr,aL as ir,aM as lr,aN as cr,aO as pr,aP as dr}from"./vendor.51864fe9.js";const ur=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}};ur();class ye{}const ie=new ws;var le=function(s,e,r,o){var a=arguments.length,n=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,r,o);else for(var c=s.length-1;c>=0;c--)(l=s[c])&&(n=(a<3?l(n):a>3?l(e,r,n):l(e,r))||n);return a>3&&n&&Object.defineProperty(e,r,n),n};const Pt={async:!0};class y extends ye{constructor(e){super();this.dependents=[],this.preLoad=async()=>{},this.postLoad=async()=>{},this.loadRepo=async()=>{this.repo&&await this.repo.call()},this.loadChildren=async()=>{await this._children.load()},this.loadDependents=async()=>{for(const r of this.dependents)await r.load()},this.loadModel=async()=>{this.repo!==void 0&&this.repo.state==="loaded"&&(this._data=this.repo.data)},this.load=async()=>{if(this.asyncState=this.asyncState==="loaded"?"reloading":"loading",await this.preLoad(),await this.loadRepo(),this.repo&&this.repo.state==="error"){this.asyncState="error";return}await this.loadModel(),await this.loadChildren(),await this.loadDependents(),await this.postLoad(),this.asyncState=this.repo?this.repo.state:"loaded"},this.add=r=>{var a;const o=r||this.defaultData;(a=this.parentCollection)==null||a.add(o)},this.remove=()=>{var r;(r=this.parentCollection)==null||r.remove(this)},this.config=ce(Pt,e),this._data=this.config.data,this.asyncState="unloaded",this.repos=Wt(this.config.repos),this.forms=Wt(this.config.forms),this.config.parent&&(this.parent=this.config.parent),this.config.parentCollection&&(this.parentCollection=this.config.parentCollection),this._children=new hr(this,this.config.children),q(this)}get repo(){return this.repos.main}get form(){return this.forms.main}set data(e){this.loadData(e)}async loadData(e){this._data=e,await this.loadChildren()}get data(){return this._data}get state(){return this.config.async?this.asyncState:this.repo?this.repo.state:"loaded"}onChange(e){return this.form.onChange(e)}get payload(){var e,r;return h(h({},(e=this.form)==null?void 0:e.data),(r=this.child)==null?void 0:r.payload)}get children(){return this._children.children}get child(){return this.children.main}get defaultData(){}}le([F],y.prototype,"asyncState",void 0);le([F],y.prototype,"_data",void 0);const mr=B(h({},Pt),{collections:y});class A extends y{constructor(e){super(h({},e));this.loadCollections=async()=>{await this._collections.load()},this.load=async()=>{if(this.asyncState="loading",await this.preLoad(),await this.loadRepo(),this.repo&&this.repo.state==="error"){this.asyncState="error";return}await this.loadModel(),await this.loadChildren(),await this.loadCollections(),await this.loadDependents(),await this.postLoad(),this.asyncState="loaded"},this.add=r=>{var a;const o=r||this.defaultData;(a=this.collection)==null||a.add(o)},this.remove=()=>{var r;(r=this.collection)==null||r.remove(this)},this.getBy=(r,o)=>this.collection.filter(a=>a.data[r]===o),this.config=ce(mr,e),this._collections=new _t(this,this.config.collections),q(this)}async loadData(e){super.loadData(e),await this.loadCollections()}get collections(){return this._collections.collections}get collection(){return this.collections.main}get payload(){return this.collection.map(e=>e.payload)}map(e){return this.collection.map(e)}}le([F],A.prototype,"_collections",void 0);le([We],A.prototype,"collections",null);le([We],A.prototype,"collection",null);var Dt=function(s,e,r,o){var a=arguments.length,n=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,r,o);else for(var c=s.length-1;c>=0;c--)(l=s[c])&&(n=(a<3?l(n):a>3?l(e,r,n):l(e,r))||n);return a>3&&n&&Object.defineProperty(e,r,n),n};const Rt=s=>{const e=[];return Object.keys(s).forEach(r=>{typeof s[r]=="object"&&!Array.isArray(s[r])&&s[r]?Rt(s[r]).forEach(o=>{e.push(`${r}.${o}`)}):e.push(r)}),e},ce=(s,e)=>e?P.exports.merge({},s,e):s,Wt=s=>s===void 0?{}:s instanceof ye?{main:s}:s;class hr{constructor(e,r){this.parent=e,this.childrenConfig={},this.children={},this.format=o=>{let a={};return o===void 0||((o==null?void 0:o.prototype)instanceof y||o==y?a={main:{model:o,key:void 0}}:o instanceof Object&&(a=o)),a},this.load=async()=>{let o=[];const{data:a}=this.parent;if(!!a){for(const n of Object.keys(this.childrenConfig)){const l=this.childrenConfig[n],c=l.model,d=l.key,x=d?P.exports.get(a,d):void 0,E=new c({data:x,parent:this.parent});this.parent.config.async&&o.push(E.load()),this.children[n]=E}await Promise.all(o)}},this.childrenConfig=this.format(r)}}class _t{constructor(e,r){this.model=e,this.collectionsConfig={},this.collections={},this.format=o=>{let a={};return o===void 0||((o==null?void 0:o.prototype)instanceof y||o==y?a={main:{model:o,key:void 0}}:o instanceof Object&&(a=o)),a},this.load=async()=>{let o=[];const{data:a}=this.model;if(!!a){for(const n of Object.keys(this.collectionsConfig)){const l=this.collectionsConfig[n],c=new Ut(this.model,a,l);this.collections[n]=c,o.push(c.load())}await Promise.all(o)}},this.collectionsConfig=this.format(r),q(this)}}Dt([F],_t.prototype,"collections",void 0);class Ut{constructor(e,r,o){this.parent=e,this.data=r,this.modelObject=o,this.models=[],this.map=a=>this.models.map(a),this.filter=a=>this.models.filter(a),this.add=async a=>{await this.initModel(a)},this.remove=a=>{this.models=P.exports.filter(this.models,n=>n!==a)},this.initModel=async a=>{const n=this.modelObject.model,l=new n({data:a,parent:this.parent,parentCollection:this});this.parent.config.async&&await l.load(),this.models.push(l)},this.load=async()=>{let a=[];const n=this.modelObject.key,l=n?P.exports.get(this.data,n):this.data;for(const c of l)a.push(this.add(c));await Promise.all(a)},this.models=[],q(this)}*[Symbol.iterator](){for(let e of this.models)yield e}get length(){return this.models.length}}Dt([F],Ut.prototype,"models",void 0);var we=function(s,e,r,o){var a=arguments.length,n=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,r,o);else for(var c=s.length-1;c>=0;c--)(l=s[c])&&(n=(a<3?l(n):a>3?l(e,r,n):l(e,r))||n);return a>3&&n&&Object.defineProperty(e,r,n),n};const gr=async s=>{const e=ks(s),r=await bs(e);let o={};const a=(n,l)=>{for(const c of l){const d=[n,c.property].filter(E=>E!="").join(".");a(d,c.children);const x=Object.values(c.constraints||{});typeof P.exports.get(o,d)!="object"&&(x.length>0?P.exports.set(o,d,x[0]):P.exports.set(o,d,"error"))}};return a("",r),o},xr={validator:void 0,data:{},keys:[]};class b extends ye{constructor(e){super();this.errors={},this.onChange=r=>o=>{let a;o&&o.target!==void 0?a=o.target.value:a=o,P.exports.set(this.data,r,a),this.validateDebounce()},this.convert=(r,o,a)=>{const n={},l=Rt(r);for(const c of l){const d=o[c]||c,x=a[d],E=P.exports.get(r,c),S=x?x(E):E;P.exports.set(n,d,S)}return n},this.validate=async()=>{if(this.validator==null){this.state="valid";return}const r=P.exports.cloneDeep(this.payload),o=new this.validator;Object.assign(o,r);const a=await gr(o);return this.errors=this.convert(a,this.inMap,{}),this.state=Object.keys(this.errors).length==0?"valid":"invalid",this.state},this.validateDebounce=P.exports.debounce(this.validate,200,{leading:!0}),this.config=ce(xr,e),this.keys=this.config.keys,this.validator=this.config.validator,this.state="valid",this.data=this.config.data,this.initRepo(this.config.repo),this.submit=this.config.submit,q(this)}initRepo(e){!e||(this.repo=e,e.onLoad.subscribe(()=>{this.data=e.data}))}get keyMap(){let e={};return this.keys.forEach(r=>{let o=r[0],a=r[1],n,l;typeof o=="object"?n=o.key:n=o,typeof a=="object"?l=a.key:l=a,e[n]=l}),e}get inMap(){return P.exports.invert(this.keyMap)}get outMap(){return this.keyMap}get inCast(){let e={};return this.keys.forEach(r=>{const o=r[0];typeof o=="object"&&o.cast!==void 0&&(e[o.key]=o.cast)}),e}get outCast(){let e={};return this.keys.forEach(r=>{const o=r[1];typeof o=="object"&&o.cast!==void 0&&(e[o.key]=o.cast)}),e}get(e){return P.exports.get(this.data,e)}getError(e){return P.exports.get(this.errors,e)}set data(e){this._data=this.convert(e,this.inMap,this.inCast)}get data(){return this._data}get payload(){return this.convert(this.data,this.outMap,this.outCast)}get isValid(){return this.state==="valid"}async call(){!this.submit||await this.submit.call(this.payload)}}we([F],b.prototype,"_data",void 0);we([F],b.prototype,"state",void 0);we([F],b.prototype,"errors",void 0);we([We],b.prototype,"data",null);const Er={unsubscribe:()=>{}};class Nt{constructor(){this.consumers=new Map}get size(){return this.consumers.size}subscribe(e){if(!e)return Er;const r=Object.create(null);return this.consumers.set(r,e),new fr(this.consumers,r)}emit(e){this.consumers.size!==0&&this.consumers.forEach(r=>r(e))}clear(){this.consumers.clear(),this.consumers=new Map}}class fr{constructor(e,r){this.consumers=e,this.consumerKey=r}unsubscribe(){this.consumers&&this.consumerKey&&this.consumers.delete(this.consumerKey),this.consumers=void 0,this.consumerKey=void 0}}var It=function(s,e,r,o){var a=arguments.length,n=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,r,o);else for(var c=s.length-1;c>=0;c--)(l=s[c])&&(n=(a<3?l(n):a>3?l(e,r,n):l(e,r))||n);return a>3&&n&&Object.defineProperty(e,r,n),n};const yr={};class Me extends ye{constructor(e){super();var r,o;this.preCall=async()=>{this.state=this.state==="loaded"?"reloading":"loading"},this.fetch=async()=>{},this.parse=async()=>{},this.postCall=async()=>{},this._postCall=async()=>{this.state=="loaded"&&this.onLoad.emit(this.data),this.state=="error"&&this.onError.emit(this.data)},this.config=ce(yr,e),this.data=this.config.data,this.onLoad=new Nt,this.onError=new Nt,((r=e==null?void 0:e.events)==null?void 0:r.onLoad)&&this.onLoad.subscribe(a=>{ie.emit(e.events.onLoad.type,e.events.onLoad.data)}),((o=e==null?void 0:e.events)==null?void 0:o.onError)&&this.onError.subscribe(()=>{ie.emit(e.events.onError.type,e.events.onError.data)}),this.state="unloaded",q(this)}async call(e){await this.preCall(),await this.fetch(),await this.parse(),await this.postCall(),await this._postCall()}}It([F],Me.prototype,"state",void 0);It([F],Me.prototype,"data",void 0);const wr={path:"",method:"GET"};class u extends Me{constructor(e){super(e);this.call=async r=>{r&&(this._body=r),await super.call()},this.fetch=async()=>{try{this.response=await fetch(this.config.path,this.options)}catch{this.state="error"}},this.parse=async()=>{try{const r=await this.response.text();try{this.data=JSON.parse(r)}catch{this.data=r}}catch{}},this.postCall=async()=>{this.response.status>=200&&this.response.status<300?this.state="loaded":this.state="error"},this.config=ce(wr,e),this._body=this.config.body,this._headers=this.config.headers}get body(){return typeof this._body=="function"?JSON.stringify(this._body()):JSON.stringify(this._body)}get headers(){return this._headers?typeof this._headers=="function"?this._headers():this._headers:{"Content-Type":"application/json"}}get options(){return{method:this.config.method,body:this.body,headers:h({},this.headers)}}}const Ot=s=>new Proxy(s,{get:function(e,r,o){return r==="data"&&s.state=="unloaded"&&s.call(),Reflect.get(e,r,o)}}),Le="routerstore",$="authstore",$e="workspacesstore",kr="snackbarstore",br="uistore",Cr="adminstore",J={USERLOAD:{onLoad:{type:"USERLOAD",data:{message:"Successfully Loaded User!",variant:"success"}},onError:{type:"USERLOAD_ERR",data:{message:"Failed to Load User: ",variant:"error"}}},SIGNIN:{onLoad:{type:"SIGNIN",data:{message:"Successfully Logged In!",variant:"success"}},onError:{type:"SIGNIN_ERR",data:{message:"Failed to Login: ",variant:"error"}}},SIGNUP:{onLoad:{type:"SIGNUP",data:{message:"Registered! Please check your email to verify your account.",variant:"success"}},onError:{type:"SIGNUP_ERR",data:{message:"Failed to Signup: ",variant:"error"}}},WIKISECTIONS:{onLoad:{type:"WIKISECTIONS_LOAD",data:{message:"Wiki Section Successfully: ",variant:"success"}},onError:{type:"WIKISECTION_ERR",data:{message:"Wiki Section Failure: ",variant:"error"}}},WIKIPAGES:{onLoad:{type:"WIKIPAGES_LOAD",data:{message:"Wiki Page Successfully: ",variant:"success"}},onError:{type:"WIKIPAGES_ERR",data:{message:"Wiki Page Failure: ",variant:"error"}}}},Z={SIGNIN:{type:"SIGNIN",data:{message:"Successfully Logged In!",variant:"success"}},SIGNIN_ERR:{type:"SIGNIN",data:{message:"Failed to Login: ",variant:"error"}},SIGNUP:{type:"SIGNUP",data:{message:"Registered! Please check your email to verify your account.",variant:"success"}},SIGNUP_ERR:{type:"SIGNUP_ERR",data:{message:"Failed to Signup: ",variant:"error"}},VERIFY:{type:"VERIFY",data:{message:"Successfully Verified",variant:"success"}},VERIFY_ERR:{type:"VERIFY_ERR",data:{message:"Failed to Verify: ",variant:"error"}},PASSWORD_RESET:{type:"PASSWORD_RESET",data:{message:"Success: Please check your email to reset your password!",variant:"success"}},PASSWORD_RESET_ERR:{type:"PASSWORD_RESET_ERR",data:{message:"Failure: ",variant:"error"}},CHANGE_PASSWORD:{type:"CHANGE_PASSWORD",data:{message:"Successfully Changed Password",variant:"success"}},CHANGE_PASSWORD_ERR:{type:"CHANGE_PASSWORD_ERR",data:{message:"Change Password Failed: ",variant:"error"}},WORKSPACE_CRUD:{type:"WORKSPACE_CRUD",data:{message:"Workspace Successfully: ",variant:"success"}},WORKSPACE_ERR:{type:"WORKSPACE_ERR",data:{message:"Workspace Failure: ",variant:"error"}},DEPLOYMENT_CRUD:{type:"DEPLOYMENT_CRUD",data:{message:"Deployment Successfully: ",variant:"success"}},DEPLOYMENT_ERR:{type:"DEPLOYMENT_ERR",data:{message:"Deployment Failure: ",variant:"error"}},WIKI_CRUD:{type:"WIKI_CRUD",data:{message:"Wiki Successfully: ",variant:"success"}},WIKI_ERR:{type:"WIKI_ERR",data:{message:"Wiki Failure: ",variant:"error"}},USER_CRUD:{type:"USER_CRUD",data:{message:"User Successfully: ",variant:"success"}},USER_ERR:{type:"USER_ERR",data:{message:"User Failure: ",variant:"error"}},PROJECT_CRUD:{type:"PROJECT_CRUD",data:{message:"Project Successfully: ",variant:"success"}},PROJECT_ERR:{type:"PROJECT_ERR",data:{message:"Project Failure: ",variant:"error"}},PROJECT_LANE_CRUD:{type:"PROJECT_LANE_CRUD",data:{message:"Project Lane Successfully: ",variant:"success"}},PROJECT_LANE_ERR:{type:"PROJECT_LANE_ERR",data:{message:"Project Lane Failure: ",variant:"error"}},WORKSPACE_USER_CRUD:{type:"WORKSPACE_USERS_CRUD",data:{message:"Workspace User Successfully: ",variant:"success"}},WORKSPACE_USER_ERR:{type:"WORKSPACE_USERS_ERR",data:{message:"Workspace User Failure: ",variant:"error"}},LANE_TASK_CRUD:{type:"LANE_TASKS_CRUD",data:{message:"Project Task Successfully: ",variant:"success"}},LANE_TASK_ERR:{type:"LANE_TASKS_ERR",data:{message:"Project Task Failure: ",variant:"error"}}};var U;(function(s){s.User="user",s.SuperAdmin="super_admin",s.WorkspaceAdmin="workspace_admin"})(U||(U={}));const vr=[U.SuperAdmin,U.User],Sr=[U.WorkspaceAdmin,U.User],Ft=[];for(const s in U)Ft.push({label:s,value:U[s]});var g;(function(s){s.ManageUser="users:manage",s.ManageWorkspace="workspaces:manage",s.CreateWorkspace="workspaces:create",s.ReadWorkspace="workspaces:read",s.UpdateWorkspace="workspaces:update",s.DeleteWorkspace="workspaces:delete",s.CreateDeployment="deployments:create",s.ReadDeployment="deployments:read",s.ProxyDeployment="deployments:proxy",s.UpdateDeployment="deployments:update",s.DeleteDeployment="deployments:delete",s.CreateWiki="wiki:create",s.ReadWiki="wiki:read",s.UpdateWiki="wiki:update",s.DeleteWiki="wiki:delete",s.CreateWikiSection="wiki_sections:create",s.ReadWikiSection="wiki_sections:read",s.UpdateWikiSection="wiki_sections:update",s.DeleteWikiSection="wiki_sections:delete",s.CreateWikiPage="wiki_pages:create",s.ReadWikiPage="wiki_pages:read",s.UpdateWikiPage="wiki_pages:update",s.DeleteWikiPage="wiki_pages:delete",s.CreateProject="projects:create",s.ReadProject="projects:read",s.UpdateProject="projects:update",s.DeleteProject="projects:delete",s.CreateProjectLane="project_lanes:create",s.ReadProjectLane="project_lanes:read",s.UpdateProjectLane="project_lanes:update",s.DeleteProjectLane="project_lanes:delete",s.CreateProjectTask="project_tasks:create",s.ReadProjectTask="project_tasks:read",s.UpdateProjectTask="project_tasks:update",s.DeleteProjectTask="project_tasks:delete"})(g||(g={}));const Pr=[g.CreateWorkspace,g.ReadWorkspace,g.UpdateWorkspace,g.DeleteWorkspace],Dr=[g.CreateDeployment,g.ReadDeployment,g.ProxyDeployment,g.UpdateDeployment,g.DeleteDeployment,g.CreateWiki,g.ReadWiki,g.UpdateWiki,g.DeleteWiki,g.CreateWikiSection,g.ReadWikiSection,g.UpdateWikiSection,g.DeleteWikiSection,g.CreateWikiPage,g.ReadWikiPage,g.UpdateWikiPage,g.DeleteWikiPage,g.CreateProject,g.ReadProject,g.UpdateProject,g.DeleteProject,g.CreateProjectLane,g.ReadProjectLane,g.UpdateProjectLane,g.DeleteProjectLane,g.CreateProjectTask,g.ReadProjectTask,g.UpdateProjectTask,g.DeleteProjectTask];class Rr extends b{constructor(){super({data:{email:"",password:""},validator:R.SignInDto,submit:new u({path:"/api/auth/login",method:"POST",events:{onLoad:Z.SIGNIN,onError:Z.SIGNIN_ERR}})})}}class Tt extends b{constructor(){super({data:{fullName:"",email:"",password:""},validator:R.CreateUserDto,submit:new u({path:"/api/auth/register",method:"POST",events:J.SIGNUP})})}}class Wr extends Tt{constructor(){super();this.submit=new u({path:"/api/users",method:"POST",events:J.SIGNUP})}}class _r extends b{constructor(){super({data:{token:""},validator:R.VerifyAccountDto,submit:new u({path:"/api/auth/verify-account",method:"POST",events:{onLoad:Z.VERIFY,onError:Z.VERIFY_ERR}})})}}class Ur extends b{constructor(){super({data:{email:""},validator:R.ForgotPasswordDto,submit:new u({path:"/api/auth/forgot-password",method:"POST"})})}}class Nr extends b{constructor(){super({data:{token:"",password:"",confirmPassword:""},validator:R.ChangePasswordDto,submit:new u({path:"/api/auth/change-password",method:"POST"})})}}class Ir extends b{constructor(e){super({repo:e.repo,validator:R.UpdateUserDto,submit:new u({path:"/api/user",method:"PUT",events:{onLoad:Z.USER_CRUD,onError:Z.USER_ERR}})})}}class At extends b{constructor(e){super({repo:e.repo});this.permissions=e}onSelectPermission(e){return()=>{let r;this.hasPermission(e)?r=Cs.exports.without(this.data.permissions,e):r=[...this.data.permissions,e],this.onChange("permissions")(r)}}hasPermission(e){return this.data.permissions.includes(e)}onSelectRole(e){return()=>{let r=[e];this.onChange("roles")(r)}}hasRole(e){return this.data.roles.includes(e)}}class Or extends At{constructor(e,r){super(e);this.permissions=e,this.workspace=r,this.submit=new u({path:this.permissions.api,method:"PUT"})}}class Fr extends At{constructor(e){super(e);this.permissions=e,this.submit=new u({path:this.permissions.api,method:"PUT"})}}class Tr extends b{constructor(e){super({data:{fullName:e.fullName,password:""},submit:new u({path:e.api,method:"PUT"})});this.user=e}get payload(){return this.data.password!==""?{fullName:this.data.fullName,password:this.data.password}:{fullName:this.data.fullName}}}const Ar=W(s=>({root:{color:"white","& .MuiOutlinedInput-notchedOutline":{color:"white",borderColor:"white"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"}},input:{"&::selection":{color:"white"}}})),Mr=W({root:{color:"white","&.Mui-focused":{color:"white"}}});p(s=>{const{workspacesstore:e}=m(),r=e.workspaces,o=r.workspaces,a=r.state==="loading",n=Ar(),l=Mr(),c=(d,x)=>{e.selectedWorkspace=x};return a?null:t.exports.createElement(ot,{id:"combo-box-demo",loading:a,classes:n,value:e.selectedWorkspace,onChange:c,options:o,getOptionLabel:d=>d.name,style:{width:300},renderInput:d=>t.exports.createElement(_e,B(h({},d),{InputLabelProps:{classes:l},label:"Select Workspace...",variant:"outlined"}))})});const ke=p(s=>{const c=s,{form:e,id:r,options:o}=c,a=xe(c,["form","id","options"]),n=e.get(r),l=e.getError(r);return t.exports.createElement(vs,h({error:n&&l!=null,value:n,style:{width:"100%"},onChange:e.onChange(r),variant:"outlined"},a),o.map(d=>t.exports.createElement(z,{key:d.label,value:d.value},d.label)))});p(s=>t.exports.createElement(ke,B(h({},s),{id:"roles",options:Ft,multiple:!0})));const w=p(s=>{const x=s,{form:e,id:r,children:o,workspaceCheck:a,defaultVal:n}=x,l=xe(x,["form","id","children","workspaceCheck","defaultVal"]);let c=e.get(r);const d=e.errors[r];return t.exports.createElement(_e,h({onChange:e.onChange(r),error:c&&d!=null,helperText:c?d:void 0,value:c,variant:"outlined",margin:"normal",autoComplete:"off",required:!0,fullWidth:!0,id:r,name:r,defaultValue:a&&Number(c)},l),o)}),Mt=W(s=>({margin:{margin:s.spacing(1,0,1,0)},subtitle:{margin:s.spacing(1,0,1,0),color:"inherit",variant:"subtitle1"}})),Lr=s=>{const e=Mt(),{form:r}=s,[o,a]=t.exports.useState(!0),n=()=>{r.onChange("storageCount")(o?void 0:8),a(!o)};return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(be,{form:r}),t.exports.createElement(f,null,t.exports.createElement(Ue,{checked:o,onChange:n,name:"checkedB",color:"primary"}),"Persist deployment"),o?t.exports.createElement(w,{form:r,className:e.margin,margin:"dense",id:"storageCount",label:"Storage",type:"number",InputProps:{startAdornment:t.exports.createElement(at,{position:"start"},t.exports.createElement(Ne,null))},fullWidth:!0}):null)},be=({form:s})=>t.exports.createElement(t.exports.Fragment,null,t.exports.createElement($r,{form:s}),t.exports.createElement(jr,{form:s})),Lt=({form:s})=>t.exports.createElement(je,{form:s,id:"storageCount",label:"Storage",icon:t.exports.createElement(Ne,null)}),$r=({form:s})=>t.exports.createElement(je,{form:s,id:"cpuCount",label:"CPU Cores",icon:t.exports.createElement(nt,null)}),jr=({form:s})=>t.exports.createElement(je,{form:s,id:"memoryCount",label:"RAM (GBs)",icon:t.exports.createElement(it,null)}),je=({form:s,id:e,icon:r,label:o})=>{const a=Mt();return t.exports.createElement(w,{form:s,className:a.margin,margin:"dense",id:e,label:o,type:"number",InputProps:{startAdornment:t.exports.createElement(at,{position:"start"},r)},defaultVal:s.get(e),fullWidth:!0})},$t={mouseX:null,mouseY:null},jt=s=>{const[e,r]=t.exports.useState($t),{children:o,menuItems:a}=s,n=d=>{d.preventDefault(),r({mouseX:d.clientX-2,mouseY:d.clientY-4})},l=()=>{r($t)},c=d=>()=>{d(),l()};return t.exports.createElement("div",{onContextMenu:n,style:{cursor:"context-menu"}},o,t.exports.createElement(Ee,{keepMounted:!0,open:e.mouseY!==null,onClose:l,anchorReference:"anchorPosition",anchorPosition:e.mouseY!==null&&e.mouseX!==null?{top:e.mouseY,left:e.mouseX}:void 0},a.map(d=>t.exports.createElement(z,{onClick:c(d.onClick),key:d.label},d.label))))},Be=s=>{const{onClick:e}=s;return t.exports.createElement(Ss,{color:"primary","aria-label":"add",style:{position:"absolute",bottom:"40px",right:"50px"},onClick:e},t.exports.createElement(Ie,null))},Br=H(Le)(p(s=>{const e=s[Le],{link:r}=s;return t.exports.createElement(Be,{onClick:()=>{e.push(r)}})})),Gr=s=>t.exports.createElement(D,h({variant:"contained",color:"primary",style:{bottom:3,right:3,position:"absolute"},component:N},s),s.children),j=p(s=>{const{routerstore:e}=m(),{form:r,labels:o}=s,a=e.goBack,n=async()=>{await r.call(),r.submit.state=="loaded"&&e.goBack()},l=s.cancel||a,c=s.submit||n,[d,x]=o||["Cancel","Create"],{isValid:E}=r;return t.exports.createElement("div",{style:{float:"right"}},t.exports.createElement(D,{onClick:l,color:"primary"},d),t.exports.createElement(D,{onClick:c,disabled:!E,color:"primary"},x))}),Ge=s=>{const{options:e}=s,[r,o]=t.exports.useState(null),a=Boolean(r),n=d=>{o(d.currentTarget)},l=()=>{o(null)},c=d=>()=>{d.onClick(),l()};return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(_,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:n},t.exports.createElement(Ps,null)),t.exports.createElement(Ee,{id:"long-menu",anchorEl:r,keepMounted:!0,open:a,onClose:l},e.map(d=>t.exports.createElement(z,{key:d.name,onClick:c(d)},d.name))))},v=s=>t.exports.createElement(f,{variant:"h6"},s.children),Ve=p(()=>{const{uistore:s}=m(),e=s.confirmDelete,{dialog:r,submit:o,name:a}=e;return t.exports.createElement(de,{dialog:r},t.exports.createElement(te,null,"Confirm Delete"),t.exports.createElement(se,null,t.exports.createElement(Ds,null,"Are you sure you want to delete",t.exports.createElement("br",null),a),t.exports.createElement(w,{autoFocus:!0,form:e,error:!e.valid,helperText:`type ${a} to delete`,margin:"dense",id:"name",label:"Confirm Delete",type:"text",fullWidth:!0})),t.exports.createElement(re,null,t.exports.createElement(D,{onClick:r.onClose,color:"secondary"},"Cancel"),t.exports.createElement(D,{onClick:o,disabled:!e.valid,color:"primary"},"Delete")))});var Vr=Object.defineProperty,Kr=Object.getOwnPropertyDescriptor,zr=(s,e,r,o)=>{for(var a=o>1?void 0:o?Kr(e,r):e,n=s.length-1,l;n>=0;n--)(l=s[n])&&(a=(o?l(e,r,a):l(a))||a);return o&&a&&Vr(e,r,a),a};class Bt{constructor(){i(this,"name")}}zr([Rs(),Ws()],Bt.prototype,"name",2);var Hr=Object.defineProperty,Yr=Object.getOwnPropertyDescriptor,Ke=(s,e,r,o)=>{for(var a=o>1?void 0:o?Yr(e,r):e,n=s.length-1,l;n>=0;n--)(l=s[n])&&(a=(o?l(e,r,a):l(a))||a);return o&&a&&Hr(e,r,a),a};class pe{constructor(e){i(this,"open",!1);i(this,"onOpen",()=>{this.open=!0,console.log("OPEN",this)});i(this,"onClose",()=>{this.open=!1});this.open=e||!1,G(this)}}Ke([T],pe.prototype,"open",2);class Gt extends b{constructor(){super({validator:Bt,data:{name:""}});i(this,"dialog");i(this,"callBack");i(this,"name");i(this,"setTarget",(e,r)=>{this.name=e,this.callBack=r});i(this,"submit",async()=>{this.valid&&(await this.callBack(),this.dialog.onClose())});i(this,"reset",()=>{this.data.name=""});this.dialog=new pe,G(this)}get valid(){return this.data.name===this.name}}Ke([T],Gt.prototype,"name",2);class ze extends pe{constructor(){super();i(this,"user");G(this)}setUserAndOpen(e){this.user=e,this.onOpen()}}Ke([T],ze.prototype,"user",2);class Jr extends ze{}class Zr extends ze{}class Vt extends Jr{constructor(e,r){super();this.permissions=e,this.roles=r}}const Kt=new Vt(Dr,Sr),zt=new Vt(Pr,vr),Ht=p(s=>{const{dialog:e}=s,{user:r}=e;if(console.log("PermissionsDialog",e,r),!r)return null;const o=r.permissions.permissionsForm;return t.exports.createElement(de,{dialog:e},t.exports.createElement(te,null,"Permissions: ",r.fullName),t.exports.createElement(se,null,t.exports.createElement(_o,{form:o,roles:e.roles}),t.exports.createElement(Wo,{form:o,permissions:e.permissions})),t.exports.createElement(re,null,t.exports.createElement(j,{form:o,labels:["Cancel","Edit"],cancel:e.onClose,submit:async()=>{o.call(),console.log(JSON.stringify(o.payload))}})))}),de=p(({dialog:s,children:e})=>{const{open:r,onClose:o}=s;return t.exports.createElement(_s,{open:r,onClose:o},e)}),qr=p(s=>{const{dialog:e,form:r}=s;return t.exports.createElement(de,{dialog:e},t.exports.createElement(te,null,"Invite User"),t.exports.createElement(se,null,t.exports.createElement(v,null,"User Email"),t.exports.createElement(w,{form:r,id:"email"})),t.exports.createElement(re,null,t.exports.createElement(j,{form:r,labels:["Cancel","Invite"],cancel:e.onClose,submit:async()=>{await r.call(),e.onClose()}})))}),Xr=p(s=>{const{adminstore:e}=m(),{editUserDialog:r}=e,{user:o}=r;if(!o)return null;const a=o.updateUserForm;return t.exports.createElement(de,{dialog:r},t.exports.createElement(te,null,"Edit: ",o.fullName),t.exports.createElement(se,null,t.exports.createElement(v,null,"Full Name"),t.exports.createElement(w,{form:a,id:"fullName"}),t.exports.createElement(v,null,"Password"),t.exports.createElement(w,{form:a,id:"password",type:"password"})),t.exports.createElement(re,null,t.exports.createElement(j,{form:a,cancel:()=>{r.onClose()},submit:async()=>{await a.call(),r.onClose()},labels:["Cancel","Edit"]})))}),Qr=p(s=>{const{adminstore:e}=m(),{createUserDialog:r}=e,o=e.users.createUserForm;return t.exports.createElement(de,{dialog:r},t.exports.createElement(te,null,"Create User"),t.exports.createElement(se,null,t.exports.createElement(v,null,"Full Name"),t.exports.createElement(w,{form:o,id:"fullName"}),t.exports.createElement(v,null,"Email"),t.exports.createElement(w,{form:o,id:"email"}),t.exports.createElement(v,null,"Password"),t.exports.createElement(w,{form:o,id:"password",type:"password"})),t.exports.createElement(re,null,t.exports.createElement(j,{form:o,cancel:()=>{r.onClose()},submit:async()=>{await o.call(),r.onClose()},labels:["Cancel","Create"]})))}),eo=W({root:{width:"100%"},container:{maxHeight:580},heading:{marginBottom:"20px"}}),Ce=s=>{const e=eo(),{columns:r,rows:o}=s,[a,n]=t.exports.useState(0),[l,c]=t.exports.useState(10),d=(E,S)=>{n(S)},x=E=>{c(+E.target.value),n(0)};return t.exports.createElement(lt,{className:e.root},t.exports.createElement(Us,{className:e.container},t.exports.createElement(Ns,{stickyHeader:!0,"aria-label":"sticky table"},t.exports.createElement(Is,null,t.exports.createElement(ct,null,r.map(E=>t.exports.createElement(pt,{key:E.id,align:E.align,style:{minWidth:E.minWidth}},E.label)))),t.exports.createElement(Os,null,o.slice(a*l,a*l+l).map(E=>t.exports.createElement(ct,{hover:!0,role:"checkbox",tabIndex:-1,key:E.id},r.map(S=>{const De=E[S.id];return t.exports.createElement(pt,{key:S.id,align:S.align},De)})))))),t.exports.createElement(Fs,{rowsPerPageOptions:[10,25,100],component:"div",count:o.length,rowsPerPage:l,page:a,onPageChange:d,onRowsPerPageChange:x}))},to=[{id:"fullName",label:"Full Name"},{id:"email",label:"Email"},{id:"id",label:"User ID"},{id:"isEnabled",label:"Enabled"},{id:"isVerified",label:"Verified"},{id:"menu",label:"",align:"right",minWidth:50}],so=p(()=>{const{adminstore:s,uistore:e}=m(),{users:r}=s;if(r.state!=="loaded")return null;const o=r.map(a=>({email:a.email,fullName:a.fullName,id:a.id,isEnabled:a.isEnabled?"True":"False",isVerified:a.isVerified?"True":"False",menu:t.exports.createElement(Ge,{options:[{name:"Delete",onClick:()=>{e.setDeleteTarget(a.fullName,a.onDelete)}},{name:"Edit",onClick:()=>{s.editUserDialog.setUserAndOpen(a)}},{name:a.isEnabled?"Disable":"Enable",onClick:()=>{a.onFlipDisable()}},{name:a.isVerified?"Unverify":"Verify",onClick:()=>{a.onFlipVerify()}},{name:"Reset Password",onClick:()=>{a.onResetPassword()}},{name:"Permissions",onClick:()=>{zt.setUserAndOpen(a)}}]})}));return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(f,{variant:"h4"},"Users"),t.exports.createElement(Ce,{columns:to,rows:o}))}),ro=p(s=>{const{adminstore:e}=m();return t.exports.createElement("div",null,t.exports.createElement(so,null),t.exports.createElement(Ht,{dialog:zt}),t.exports.createElement(Xr,null),t.exports.createElement(Qr,null),t.exports.createElement(Be,{onClick:e.createUserDialog.onOpen}))}),oo=()=>t.exports.createElement("div",null,"admin home page"),ao=W(s=>({root:{color:"white","& .MuiOutlinedInput-notchedOutline":{color:"white",borderColor:"white"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"}},input:{"&::selection":{color:"white"}}})),no=W({root:{color:"white","&.Mui-focused":{color:"white"}}}),io=p(()=>{const{workspacesstore:s}=m(),e=ao(),r=no(),o=s.workspaces,a=o.workspaces,n=o.state!=="loaded",l=s.selectedWorkspace,c=(d,x)=>{s.selectedWorkspace=x};return t.exports.createElement("div",null,t.exports.createElement(ot,{id:"combo-box-demo",loading:n,classes:e,value:l,onChange:c,options:a,getOptionLabel:d=>d.name,style:{width:300},renderInput:d=>t.exports.createElement(_e,B(h({},d),{InputLabelProps:{classes:r},label:"Select Workspace...",variant:"outlined"}))}))}),Yt=240,Jt=W(s=>({toolbar:{paddingRight:24,marginTop:5},appBar:{zIndex:s.zIndex.drawer+1,transition:s.transitions.create(["width","margin"],{easing:s.transitions.easing.sharp,duration:s.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Yt,width:`calc(100% - ${Yt}px)`,transition:s.transitions.create(["width","margin"],{easing:s.transitions.easing.sharp,duration:s.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},search:{position:"relative",borderRadius:s.shape.borderRadius,backgroundColor:dt(s.palette.common.white,.15),"&:hover":{backgroundColor:dt(s.palette.common.white,.25)},marginLeft:0,width:"100%",[s.breakpoints.up("sm")]:{marginLeft:s.spacing(1),width:"auto"}},searchIcon:{padding:s.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:s.spacing(1,1,1,0),paddingLeft:`calc(1em + ${s.spacing(4)}px)`,transition:s.transitions.create("width"),width:"100%",[s.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}},accountIcon:{position:"absolute",right:"0px"}})),lo=p(s=>{const{uistore:e,authstore:r}=m(),o=Jt(),[a,n]=t.exports.useState(null),l=Boolean(a),c=e.sideBarOpen,d=S=>{n(S.currentTarget)},x=()=>{n(null)},E=async()=>{await r.logout(),n(null)};return t.exports.createElement(ut,{position:"absolute",className:X(o.appBar,c&&o.appBarShift)},t.exports.createElement(mt,{className:o.toolbar},t.exports.createElement(_,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:e.toggleSidebar,className:X(o.menuButton,c&&o.menuButtonHidden)},t.exports.createElement(ht,null)),t.exports.createElement(io,null),t.exports.createElement("div",{className:o.accountIcon},t.exports.createElement(_,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:d,color:"inherit"},t.exports.createElement(gt,null)),t.exports.createElement(Ee,{id:"menu-appbar",anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:x},t.exports.createElement(z,{button:!0,component:N,to:"/edit-profile"},"My Profile"),t.exports.createElement(z,{onClick:E},"Sign Out")))))}),co=p(s=>{const{uistore:e,authstore:r}=m(),o=Jt(),[a,n]=t.exports.useState(null),l=Boolean(a),c=e.sideBarOpen,d=S=>{n(S.currentTarget)},x=()=>{n(null)},E=async()=>{await r.logout(),n(null)};return t.exports.createElement(ut,{position:"absolute",className:X(o.appBar,c&&o.appBarShift)},t.exports.createElement(mt,{className:o.toolbar},t.exports.createElement(_,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:e.toggleSidebar,className:X(o.menuButton,c&&o.menuButtonHidden)},t.exports.createElement(ht,null)),t.exports.createElement("div",{className:o.accountIcon},t.exports.createElement(_,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:d,color:"inherit"},t.exports.createElement(gt,null)),t.exports.createElement(Ee,{id:"menu-appbar",anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:x},t.exports.createElement(z,{button:!0,component:N,to:"/edit-profile"},"My Profile"),t.exports.createElement(z,{onClick:E},"Sign Out")))))}),po=240,Zt=W(s=>({toolbarIcon:h({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},s.mixins.toolbar),drawerPaper:{position:"relative",whiteSpace:"nowrap",width:po,transition:s.transitions.create("width",{easing:s.transitions.easing.sharp,duration:s.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:s.transitions.create("width",{easing:s.transitions.easing.sharp,duration:s.transitions.duration.leavingScreen}),width:s.spacing(7),[s.breakpoints.up("sm")]:{width:s.spacing(9)}},paper:{padding:s.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"}})),ee=({links:s})=>{const e=r=>window.location.pathname==r;return t.exports.createElement(t.exports.Fragment,null,s.map(r=>t.exports.createElement(fe,{key:r.text,button:!0,component:N,to:r.url,selected:e(r.url)},t.exports.createElement(Ts,null,r.icon),t.exports.createElement(Fe,{primary:r.text}))))},uo=p(s=>{const e=Zt(),{uistore:r,workspacesstore:o}=m(),a=o.selectedWorkspace;if(!a)return null;const n=a==null?void 0:a.link,l=r.sideBarOpen,c=[{icon:t.exports.createElement(As,null),url:n,text:"Deployments"},{icon:t.exports.createElement(Ms,null),url:n+"/p",text:"Projects"},{icon:t.exports.createElement(Ls,null),url:n+"/wiki",text:"Wiki"}],d=[{icon:t.exports.createElement($s,null),url:"/w/new",text:"New"},{icon:t.exports.createElement(js,null),url:`${n}/edit`,text:"Settings"},{icon:t.exports.createElement(Bs,null),url:`${n}/metrics`,text:"Metrics"}],x=[{icon:t.exports.createElement(Te,null),url:`${n}/admin/users`,text:"Workspace Users"}],E=[{icon:t.exports.createElement(Te,null),url:"/admin/users",text:"Users"}];return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(xt,{variant:"permanent",classes:{paper:X(e.drawerPaper,!l&&e.drawerPaperClose)},open:r.sideBarOpen},t.exports.createElement("div",{className:e.toolbarIcon},t.exports.createElement(_,{onClick:r.toggleSidebar},t.exports.createElement(Et,null))),t.exports.createElement(oe,null),t.exports.createElement(Y,null,t.exports.createElement(ee,{links:c})),t.exports.createElement(oe,null),t.exports.createElement(Y,{subheader:t.exports.createElement(Xe,{if:l},t.exports.createElement(Oe,null,"Workspace"))},t.exports.createElement(ee,{links:d}),t.exports.createElement(Qe,{roles:[U.WorkspaceAdmin,U.SuperAdmin],wid:a.id},t.exports.createElement(ee,{links:x}))),t.exports.createElement(oe,null),t.exports.createElement(Qe,{roles:[U.SuperAdmin]},t.exports.createElement(Y,{subheader:t.exports.createElement(Xe,{if:l},t.exports.createElement(Oe,null,"Admin"))},t.exports.createElement(ee,{links:E})))))}),mo=p(s=>{const{uistore:e,workspacesstore:r}=m(),o=Zt(),a=e.sideBarOpen,n=[{icon:t.exports.createElement(Gs,null),url:"/",text:"Home"}],l=[{icon:t.exports.createElement(Te,null),url:"/admin/users",text:"Users"}];return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(xt,{variant:"permanent",classes:{paper:X(o.drawerPaper,!a&&o.drawerPaperClose)},open:e.sideBarOpen},t.exports.createElement("div",{className:o.toolbarIcon},t.exports.createElement(_,{onClick:e.toggleSidebar},t.exports.createElement(Et,null))),t.exports.createElement(oe,null),t.exports.createElement(Y,null,t.exports.createElement(ee,{links:n})),t.exports.createElement(oe,null),t.exports.createElement(Qe,{roles:[U.SuperAdmin]},t.exports.createElement(Y,{subheader:t.exports.createElement(Xe,{if:a},t.exports.createElement(Oe,null,"Admin"))},t.exports.createElement(ee,{links:l})))))}),qt=()=>t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(lo,null),t.exports.createElement(uo,null)),ho=()=>t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(co,null),t.exports.createElement(mo,null)),go=W(s=>({paper:{position:"absolute",transform:"translateY(-50%)",top:"50%",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",width:"500px"}})),Xt=s=>{const e=go();return t.exports.createElement(lt,{className:e.paper},s.children)},V=s=>{const{children:e}=s;return t.exports.createElement(ae,{component:"main",maxWidth:"xs"},t.exports.createElement(ft,null),t.exports.createElement(Xt,null,e))},ve=W(s=>({root:{display:"flex"},content:{overflow:"auto",marginTop:"69px",boxSizing:"border-box",width:"100%",height:"calc(100vh - 64px)"},container:{paddingTop:s.spacing(4),paddingBottom:s.spacing(4)},fixedHeight:{height:240}})),xo=s=>{const e=ve(),{children:r}=s;return t.exports.createElement("div",{className:e.root},t.exports.createElement(qt,null),t.exports.createElement("main",{className:e.content},t.exports.createElement(ae,{maxWidth:!1,className:e.container},r)),t.exports.createElement(Ve,null))},Qt=s=>{const{children:e}=s,r=ve();return t.exports.createElement("div",{className:r.root},t.exports.createElement(qt,null),t.exports.createElement("main",{className:r.content},e),t.exports.createElement(Ve,null))},K=s=>{const{children:e}=s,r=ve();return t.exports.createElement(Qt,null,t.exports.createElement(ae,{maxWidth:!1,className:r.container},e))},es=s=>{const e=ve(),{children:r}=s;return t.exports.createElement("div",{className:e.root},t.exports.createElement(ho,null),t.exports.createElement("main",{className:e.content},t.exports.createElement(ae,{maxWidth:!1,className:e.container},r)),t.exports.createElement(Ve,null))},ts="/admin/",Eo=()=>t.exports.createElement(es,null,t.exports.createElement(ne,null,t.exports.createElement(L,{path:`${ts}users`,component:ro}),t.exports.createElement(L,{path:`${ts}`,component:oo}))),ss=()=>Vs.parse(Ks().search,{ignoreQueryPrefix:!0}),fo=(s,e)=>{for(const r of e)r.onLoad.subscribe(()=>{s.load()})},rs=(s,e)=>{const r=o=>{o.onLoad.subscribe(()=>{s.data=o.data})};if(Array.isArray(e))for(const o of e)r(o);else r(e)},He=(s,e)=>{e.onLoad.subscribe(()=>{s.add(e.data)})},Se=(s,e)=>{e.onLoad.subscribe(()=>{s.remove()})};class os extends y{get fullName(){return this.data.fullName}get id(){return this.data.id}get email(){return this.data.email}}class as extends os{constructor(){super(...arguments);i(this,"permissions")}}class yo extends os{constructor(){super();i(this,"permissions");i(this,"updateUserForm");this.repos={main:new u({path:this.api,events:J.USERLOAD})},this.permissions=new So(this),this.dependents=[this.permissions],this.updateUserForm=new Ir(this)}get api(){return"/api/user"}}class wo extends A{constructor(){super({collections:ko});i(this,"createUserForm");this.createUserForm=new Wr,this.repos={main:new u({path:this.api})},He(this,this.createUserForm.submit)}get api(){return"/api/users/"}get users(){return this.collection}}class ko extends as{constructor({parent:e,data:r,parentCollection:o}){super({parent:e,data:r,parentCollection:o});i(this,"updateUserForm");i(this,"deleteUserForm");i(this,"users");i(this,"disable");i(this,"enable");i(this,"verify");i(this,"unverify");i(this,"delete");i(this,"resetPassword");i(this,"onFlipDisable",async()=>{this.isEnabled?this.disable.call():this.enable.call()});i(this,"onFlipVerify",async()=>{this.isVerified?this.unverify.call():this.verify.call()});i(this,"onDelete",async()=>{await this.delete.call()});i(this,"onResetPassword",async()=>{await this.resetPassword.call()});this.users=e,this.updateUserForm=new Tr(this),this.permissions=new Ro(this),this.disable=new u({path:this.api,method:"PUT",body:{isEnabled:!1}}),this.enable=new u({path:this.api,method:"PUT",body:{isEnabled:!0}}),this.verify=new u({path:this.api,method:"PUT",body:{isVerified:!0}}),this.unverify=new u({path:this.api,method:"PUT",body:{isVerified:!1}}),this.resetPassword=new u({path:"/api/auth/forgot-password",method:"POST",body:{email:this.email}}),this.delete=new u({path:this.api,method:"DELETE"}),rs(this,[this.disable,this.enable,this.verify,this.unverify,this.updateUserForm.submit]),Se(this,this.delete),this.dependents=[this.permissions]}get email(){return this.data.email}get fullName(){return this.data.fullName}get isEnabled(){return this.data.isEnabled}get isVerified(){return this.data.isVerified}get id(){return this.data.id}get api(){return`/api/users/${this.data.id}`}}class bo extends A{constructor(e,r){super({collections:{main:{key:"users",model:Co}}});this.workspace=e,this.workspaceAdmin=r,this.repos={main:new u({path:this.api})}}get api(){return`${this.workspace.api}/users`}}class Co extends as{constructor({data:e,parent:r,parentCollection:o}){super({data:e,parent:r,parentCollection:o});i(this,"workspaceUsers");i(this,"workspace");i(this,"onRemove",async()=>{await this.repos.remove.call()});this.workspaceUsers=r,this.workspace=this.workspaceUsers.workspace,this.permissions=new Do(this,this.workspace),this.repos={remove:new u({path:this.api,method:"DELETE"})},this.dependents=[this.permissions],Se(this,this.repos.remove)}get id(){return this.data.id}get api(){return`${this.workspaceUsers.api}/${this.id}`}}class M{constructor(e){i(this,"has",e=>this.array.includes(e));this._array=e}get array(){return this._array||[]}}class vo extends y{}class So extends vo{constructor(e){super({});i(this,"workspacesPermissions",{});i(this,"getWorkspacePermission",e=>this.workspacesPermissions[e]);i(this,"postLoad",async()=>{for(const e in this.data.workspaces){const r=this.data.workspaces[e];this.workspacesPermissions[e]=new Po(e,r)}});this.user=e,this.repos={main:new u({path:this.api})}}get api(){return"/api/user/permissions"}get permissions(){return new M(this.data.permissions)}get roles(){return new M(this.data.roles)}}class Po{constructor(e,r){this.id=e,this.data=r}get permissions(){return new M(this.data.permissions)}get roles(){return new M(this.data.roles)}}class ns extends y{constructor(){super();i(this,"permissionsForm")}get permissions(){return new M(this.data.permissions)}get roles(){return new M(this.data.roles)}}class Do extends ns{constructor(e,r){super();i(this,"permissionsForm");i(this,"permissionsDialog");this.user=e,this.workspace=r,this.forms={main:this.permissionsForm},this.repos={main:new u({path:this.api})},this.permissionsForm=new Or(this,r)}get api(){return`${this.workspace.api}/users/${this.user.id}/permissions`}get permissions(){return new M(this.data.permissions)}get roles(){return new M(this.data.roles)}}class Ro extends ns{constructor(e){super();i(this,"permissionsForm");this.user=e,this.repos={main:new u({path:this.api})},this.forms={main:this.permissionsForm},this.permissionsForm=new Fr(this)}get api(){return`${this.user.api}/permissions`}get permissions(){return new M(this.data.permissions)}get roles(){return new M(this.data.roles)}}const is=[{id:"checkbox",label:""},{id:"permission",label:"Permission"}],Wo=p(s=>{const{form:e,permissions:r}=s,o=[];for(const a of r)o.push({checkbox:t.exports.createElement(Ue,{onClick:e.onSelectPermission(a),checked:e.hasPermission(a)}),permission:a});return t.exports.createElement("div",null,t.exports.createElement(v,null,"Permission Form"),t.exports.createElement(Ce,{columns:is,rows:o}))}),_o=p(s=>{const{form:e,roles:r}=s,o=[];for(const a of r)o.push({checkbox:t.exports.createElement(Ue,{onClick:e.onSelectRole(a),checked:e.hasRole(a)}),permission:a});return t.exports.createElement("div",null,t.exports.createElement(v,null,"Role Form"),t.exports.createElement(Ce,{columns:is,rows:o}))}),Uo=p(s=>{const{authstore:e,routerstore:r}=m(),a=e.user.updateUserForm;return t.exports.createElement("div",null,t.exports.createElement(f,{variant:"h4"},"Edit Profile"),t.exports.createElement(f,{variant:"h6",style:{marginTop:"20px"}},"Full Name"),t.exports.createElement(w,{form:a,id:"fullName"}),t.exports.createElement(j,{form:a,labels:["Cancel","Update"]}))}),No=()=>t.exports.createElement(K,null,t.exports.createElement(Uo,null)),Io=p(s=>{const{authstore:e}=m();return t.exports.useEffect(()=>{e.logout()},[]),null}),Oo=H($)(p(s=>{const e=s[$];console.log("CHANGE PASSWORD");const r=ss(),{token:o}=r,a=e.changePasswordForm;return t.exports.useEffect(()=>{a.data.token=o},[]),a.submit.state=="loading"?t.exports.createElement(V,null,t.exports.createElement(yt,null)):a.submit.state=="loaded"?t.exports.createElement(V,null,t.exports.createElement(f,null,"Success"),t.exports.createElement(D,{fullWidth:!0,variant:"contained",color:"primary",component:N,to:"login"},"Click here to login")):t.exports.createElement(V,null,t.exports.createElement(f,null,"Change Password"),t.exports.createElement(w,{form:a,id:"password",type:"password",label:"Password",autoComplete:"current-password"}),t.exports.createElement(w,{form:a,id:"confirmPassword",type:"password",label:"Confirm Password",autoComplete:"current-password"}),t.exports.createElement(D,{fullWidth:!0,variant:"contained",color:"primary",disabled:!a.isValid,onClick:()=>{e.changePassword()}},"Change Password"))})),ue=s=>zs.createElement(Hs,h({data:[{domain:{x:[0,100],y:[0,1]},value:270,type:"indicator",mode:"gauge+number"}],layout:{paper_bgcolor:"transparent",autosize:!0,xaxis:{ticksuffix:"%"}},useResizeHandler:!0,style:{width:"100%",height:"100%"}},s));let Ye=[];const Fo=Ys(p(s=>{const{snackbarstore:e}=m();return console.log(e.alerts),e.alerts.forEach(r=>{const n=r,{message:o}=n,a=xe(n,["message"]);Ye.includes(r.key)||(s.enqueueSnackbar(o,a),Ye=[...Ye,r.key],e.remove(r))}),null})),To=s=>t.exports.createElement(Js,{anchorOrigin:{vertical:"bottom",horizontal:"left"}},t.exports.createElement(Fo,null)),Ao=H($)(p(s=>{const e=s[$],r=e.forgotPasswordForm;return t.exports.createElement(ae,{component:"main",maxWidth:"xs"},t.exports.createElement(ft,null),t.exports.createElement(Xt,null,t.exports.createElement(f,{component:"h1",variant:"h5"},"Forgot Password"),t.exports.createElement(w,{form:r,id:"email",label:"Email Address"}),t.exports.createElement(D,{fullWidth:!0,variant:"contained",color:"primary",onClick:e.forgotPassword,disabled:!r.isValid},"Send Reset Link")))})),Mo=p(s=>{const{authstore:e}=m(),r=e.signinForm;return t.exports.createElement(V,null,t.exports.createElement(wt,null,t.exports.createElement(kt,null)),t.exports.createElement(f,{component:"h1",variant:"h5"},"Log in"),t.exports.createElement(w,{form:r,id:"email",label:"Email Address",autoFocus:!0}),t.exports.createElement(w,{form:r,id:"password",type:"password",label:"Password",autoComplete:"current-password"}),t.exports.createElement(D,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",onClick:e.login,disabled:!r.isValid},"Log In"),t.exports.createElement(k,{container:!0},t.exports.createElement(k,{item:!0,xs:!0},t.exports.createElement(N,{to:"/forgotPassword"},"Forgot password?")),t.exports.createElement(k,{item:!0},t.exports.createElement(N,{to:"/signup"},"Don't have an account? Sign Up"))))}),Lo=H($)(p(s=>{const e=s[$],r=e.signupForm;return t.exports.createElement(V,null,t.exports.createElement(wt,null,t.exports.createElement(kt,null)),t.exports.createElement(f,{component:"h1",variant:"h5"},"Sign Up"),t.exports.createElement(w,{form:r,id:"fullName",label:"Full Name",autoFocus:!0}),t.exports.createElement(w,{form:r,id:"email",label:"Email Address"}),t.exports.createElement(w,{form:r,id:"password",type:"password",label:"Password",autoComplete:"current-password"}),t.exports.createElement(D,{fullWidth:!0,variant:"contained",color:"primary",onClick:e.signup,disabled:!r.isValid},"Sign Up"),t.exports.createElement(k,{container:!0},t.exports.createElement(k,{item:!0,xs:!0}),t.exports.createElement(k,{item:!0},t.exports.createElement(N,{to:"/login"},"Already have an account? Log In!"))))})),$o=H($)(p(s=>{const e=s[$],r=ss(),{token:o}=r,a=e.verifyForm;return t.exports.useEffect(()=>{a.data.token=o,e.verify()},[]),a.submit.state=="loading"?t.exports.createElement(V,null,t.exports.createElement(yt,null)):a.submit.state=="loaded"?t.exports.createElement(V,null,t.exports.createElement(f,null,"Account Succesfully Verified!"),t.exports.createElement(D,{fullWidth:!0,variant:"contained",color:"primary",component:N,to:"login"},"Click here to login")):t.exports.createElement(V,null,t.exports.createElement(f,{color:"error"},a.submit.data.message),t.exports.createElement(D,{fullWidth:!0,variant:"contained",color:"primary",component:N,to:"login"},"Go back to Log In"))}));var jo=Object.defineProperty,Bo=Object.getOwnPropertyDescriptor,Go=(s,e,r,o)=>{for(var a=o>1?void 0:o?Bo(e,r):e,n=s.length-1,l;n>=0;n--)(l=s[n])&&(a=(o?l(e,r,a):l(a))||a);return o&&a&&jo(e,r,a),a};class ls{constructor(e){i(this,"state");i(this,"signupForm");i(this,"signinForm");i(this,"verifyForm");i(this,"forgotPasswordForm");i(this,"changePasswordForm");i(this,"user");i(this,"logoutRepo");i(this,"loadUser",async()=>{this.state="loading",await this.user.load(),this.state=this.user.state=="loaded"?"loggedin":"unauthed"});i(this,"login",async()=>{await this.signinForm.call(),this.signinForm.submit.state=="loaded"&&this.rootStore.routerStore.push("/")});i(this,"logout",async()=>{await this.logoutRepo.call(),this.logoutRepo.state=="loaded"&&this.rootStore.routerStore.push("/")});i(this,"signup",async()=>{await this.signupForm.call()});i(this,"forgotPassword",async()=>{await this.forgotPasswordForm.call()});i(this,"verify",async()=>{await this.verifyForm.call()});i(this,"changePassword",async()=>{await this.changePasswordForm.call()});this.rootStore=e,this.state="unauthed",this.signupForm=new Tt,this.signinForm=new Rr,this.verifyForm=new _r,this.forgotPasswordForm=new Ur,this.changePasswordForm=new Nr,this.logoutRepo=new u({path:"/api/auth/logout",method:"POST"}),this.user=new yo,this.loadUser(),G(this),ie.on(J.SIGNIN.onLoad.type,()=>{this.loadUser()})}}Go([T],ls.prototype,"state",2);class Vo extends bt.exports.RouterStore{constructor(e,r){super();this.rootStore=e,r&&(this.history=bt.exports.syncHistoryWithStore(r,this)),G(this)}get params(){const e=[/\/w\/(?<wid>[a-zA-Z0-9]{24})\/p\/(?<pid>[a-zA-Z0-9]{24})/,/\/w\/(?<wid>[a-zA-Z0-9]{24})\/wiki\/(?<sectionId>[a-zA-Z0-9]{24})/,/\/w\/(?<wid>[a-zA-Z0-9]{24})\/wiki\/(?<sectionId>[a-zA-Z0-9]{24})\/pages\/(?<pageId>[a-zA-Z0-9]{24})/,/\/w\/(?<wid>[a-zA-Z0-9]{24})/,/\/w\/(?<wid>[a-zA-Z0-9]{24})\/d\/(?<did>[a-zA-Z0-9]{24})/];let r={};for(const o of e){const a=this.location.pathname.match(o);r=h(h({},(a==null?void 0:a.groups)||{}),r)}return r}get workspaceUrl(){var r;return`/w/${(r=this.rootStore.workspacesStore.selectedWorkspace)==null?void 0:r.id}`}}class Ko extends b{constructor(e){super({});this.workspace=e}}class zo extends b{constructor(e){super({data:e.data,keys:[["cpuCount",{key:"properties.resources.cpuCount",cast:Number}],["memoryCount",{key:"properties.resources.memoryCount",cast:Number}],["storageCount",{key:"properties.resources.storageCount",cast:Number}]],submit:new u({path:e.api,method:"PUT"})});this.workspace=e}}class Ho extends b{constructor(){super({validator:R.CreateWorkspaceDto,data:{name:"",properties:{resources:{cpuCount:void 0,memoryCount:void 0,storageCount:void 0}}},keys:[["cpuCount",{key:"properties.resources.cpuCount",cast:Number}],["memoryCount",{key:"properties.resources.memoryCount",cast:Number}],["storageCount",{key:"properties.resources.storageCount",cast:Number}]],submit:new u({path:"/api/workspaces",method:"POST"})})}}class Yo extends b{constructor(e){super({data:{email:""},validator:R.AddWorkspaceUserDto,submit:new u({path:`${e.api}/users`,method:"PUT"})})}}const Jo=()=>null,Zo=[{id:"fullName",label:"Full Name"},{id:"email",label:"Email"},{id:"menu",label:"",align:"right",minWidth:50}],qo=p(s=>{const{workspaceAdmin:e}=s,{users:r}=e;if(r.state!=="loaded")return null;const o=r.map(a=>({email:a.email,fullName:a.fullName,menu:t.exports.createElement(Ge,{options:[{name:"Remove",onClick:()=>{a.onRemove()}},{name:"Permissions",onClick:()=>{Kt.setUserAndOpen(a)}}]})}));return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(f,{variant:"h4"},"Users"),t.exports.createElement(Ce,{columns:Zo,rows:o}))}),Xo=p(s=>{const{workspacesstore:e}=m(),r=e.selectedWorkspace;if(!r)return null;const o=r.workspaceAdmin;return t.exports.createElement("div",null,t.exports.createElement(qo,{workspaceAdmin:o}),t.exports.createElement(Ht,{dialog:Kt}),t.exports.createElement(qr,{form:o.inviteUserForm,dialog:o.inviteUserDialog}),t.exports.createElement(Be,{onClick:o.inviteUserDialog.onOpen}))});class Qo extends y{constructor(e){super({});i(this,"users");i(this,"permissionsDialog");i(this,"inviteUserDialog");i(this,"inviteUserForm");this.workspace=e,this.inviteUserDialog=new pe,this.inviteUserForm=new Yo(e),this.users=new bo(this.workspace,this),this.dependents=[this.users],fo(this.users,[this.inviteUserForm.submit])}}class ea extends y{constructor(e){super({data:""});this.deployment=e,this.repos={main:Ot(new u({path:this.api}))}}get logs(){return JSON.stringify(this.data)}get api(){return`${this.deployment.api}/logs`}}class ta extends y{constructor(e){super({});this.deployment=e,this.repos={main:Ot(new u({path:this.api}))}}get api(){return`${this.deployment.api}/metrics`}get memory(){return this.data.memory}get cpu(){return this.data.cpu}get cpuChart(){return{data:[{value:this.cpu,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"CPU Usage"},type:"indicator",mode:"gauge+number"}]}}get memoryChart(){return{data:[{value:this.memory,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"Memory Usage"},type:"indicator",mode:"gauge+number"}]}}}class sa extends b{constructor(e){super({data:{properties:{image:{type:"VSCODE"},scalingMethod:"ALWAYS_ON"}},keys:[["cpuCount",{key:"properties.resources.cpuCount",cast:Number}],["memoryCount",{key:"properties.resources.memoryCount",cast:Number}],["storageCount",{key:"properties.resources.storageCount",cast:Number}],["isFavorite","properties.isFavorite"],["sudoPassword","properties.sudoPassword"],["type","properties.image.type"],["version","properties.image.version"],["scalingMethod","properties.scalingMethod"]],validator:R.CreateDeploymentDto,submit:new u({path:e.api,method:"POST"})});this.deployments=e}}class ra extends b{constructor(e){super({data:{name:e.data.name,properties:{isFavorite:!1,image:e.data.properties.image,resources:{cpuCount:e.data.properties.resources.cpuCount,memoryCount:e.data.properties.resources.memoryCount}}},keys:[["cpuCount",{key:"properties.resources.cpuCount",cast:Number}],["memoryCount",{key:"properties.resources.memoryCount",cast:Number}],["storageCount",{key:"properties.resources.storageCount",cast:Number}],["isFavorite","properties.isFavorite"],["sudoPassword","properties.sudoPassword"],["type","properties.image.type"],["version","properties.image.version"]],validator:R.UpdateDeploymentDto,submit:new u({path:e.api,method:"PUT"})});this.deployment=e}}class oa extends A{constructor(e){super({collections:aa});i(this,"createDeployment");i(this,"postLoad",async()=>{console.log("deployments loaded")});this.workspace=e,this.createDeployment=new sa(this),this.repos={main:new u({path:this.api})},He(this,this.createDeployment.submit)}get deployments(){return this.collection.models||[]}get api(){return`${this.workspace.api}/deployments`}}class aa extends y{constructor({data:e,parent:r,parentCollection:o}){super({data:e,parentCollection:o,parent:r});i(this,"deployments");i(this,"logs");i(this,"metrics");i(this,"workspace");i(this,"delete");this.deployments=r,this.workspace=this.deployments.workspace,this.logs=new ea(this),this.metrics=new ta(this),this.dependents=[this.logs,this.metrics],this.forms={edit:new ra(this)},this.delete=new u({path:this.api,method:"DELETE"}),this.repos={delete:this.delete},Se(this,this.delete)}get name(){return this.data.name}get status(){return this.data.status}get id(){return this.data.id}get link(){return`${this.deployments.workspace.link}/d/${this.id}`}get api(){return`${this.deployments.api}/${this.id}`}get cpuCount(){return this.data.properties.resources.cpuCount}get memoryCount(){return this.data.properties.resources.memoryCount}get storageCount(){return this.data.properties.resources.storageCount}get proxyUrl(){return this.data.properties.proxyUrl}}class na extends A{constructor(e){super({collections:ia});this.workspace=e,this.repos={main:new u({path:this.api}),create:new u({path:this.api,method:"POST"})}}get api(){return`${this.workspace.api}/deployments`}}class ia extends y{constructor(e,r){super({data:e});this.projects=r}}class la extends A{constructor(e){super({collections:ca});i(this,"addSection");i(this,"onAddSection",()=>{this.addSection.call()});this.workspace=e,this.addSection=new u({path:this.api,method:"POST",body:{name:"New Section"},events:J.WIKISECTIONS}),this.addSection.onLoad.subscribe(()=>{this.load()}),this.repos={main:new u({path:this.api}),addSection:this.addSection}}get link(){return`${this.workspace.link}/wiki`}get api(){return`${this.workspace.api}/sections`}}class ca extends y{constructor({data:e,parent:r}){super({data:e});i(this,"sections");i(this,"wikiPages");i(this,"sectionForm");i(this,"delete");i(this,"onSubmitNameChange",()=>{});i(this,"onDelete",async()=>{await this.delete.call()});this.sections=r,this.sectionForm=new b({data:{name:e.name}}),this.delete=new u({path:this.api,method:"DELETE"}),this.wikiPages=new pa(this),this.delete.onLoad.subscribe(()=>{this.sections.load()}),this.dependents=[this.wikiPages]}get id(){return this.data.id}get link(){return`${this.sections.link}/${this.id}`}get api(){return`${this.sections.api}/${this.id}`}}class pa extends A{constructor(e){super({collections:da});i(this,"addPage");i(this,"onAddPage",()=>{this.addPage.call()});this.wikiSection=e,this.addPage=new u({path:this.api,method:"POST",body:{title:"New Page",body:"# New Page!"},events:J.WIKIPAGES}),this.addPage.onLoad.subscribe(()=>{this.load()}),this.repos={main:new u({path:this.api})}}get link(){return`${this.wikiSection.link}/pages`}get api(){return`${this.wikiSection.api}/pages`}}class da extends y{constructor({data:e,parent:r}){super({data:e});i(this,"pages");i(this,"pageForm");i(this,"delete");i(this,"onSave",async()=>{await this.pageForm.call()});i(this,"onDelete",async()=>{await this.delete.call(),this.delete.state=="loaded"&&this.pages.load()});this.pages=r,this.pageForm=new b({data:{title:e.title,body:e.body},submit:new u({path:this.api,method:"PUT"})}),this.delete=new u({path:this.api,method:"DELETE"})}get id(){return this.data.id}get api(){return`${this.pages.api}/${this.id}`}get link(){return`${this.pages.link}/${this.id}`}}class ua extends y{constructor(e){super({});i(this,"types");i(this,"versions",{});i(this,"postLoad",async()=>{this.types=[...new Set(this.data.map(e=>e.type))];for(const e of this.types)this.versions[e]=[];this.data.map(e=>{this.versions[e.type].push(e.version)})});this.workspace=e,this.repos={main:new u({path:this.api})},this.load()}getTypes(){return this.types.map(e=>({label:R.DeploymentLabelingUtil.generateImageTypeLabel(e),value:e}))}getVersions(e){return e!=null&&!this.versions[e]?[]:this.versions[e].map(r=>({label:R.DeploymentLabelingUtil.generateImageVersionLabel(r),value:r}))}get api(){return`${this.workspace.api}/deployments/images/`}}class ma extends y{constructor(e){super({});this.workspace=e,this.repos={main:new u({path:this.api})}}get api(){return`${this.workspace.api}/metrics`}get memory(){return this.data.memory}get cpu(){return this.data.cpu}get storage(){return this.data.storage}get cpuChart(){return{data:[{value:this.cpu,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"CPU Usage"},type:"indicator",mode:"gauge+number"}]}}get memoryChart(){return{data:[{value:this.memory,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"Memory Usage"},type:"indicator",mode:"gauge+number"}]}}get storageChart(){return{data:[{value:this.storage,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"Storage Usage"},type:"indicator",mode:"gauge+number"}]}}}class ha extends A{constructor(){super({collections:ga});i(this,"createWorkspaceForm");i(this,"postLoad",async()=>{console.log("workspaces loaded")});this.createWorkspaceForm=new Ho,He(this,this.createWorkspaceForm.submit),this.repos={main:new u({path:this.api}),create:new u({path:this.api,method:"POST"})}}get api(){return"/api/workspaces"}get workspaces(){return this.collection.models||[]}get selectedWorkspace(){return this.workspaces[0]}get workspaceUrl(){return`/w/${this.selectedWorkspace.id}`}}class ga extends y{constructor(e){super(e);i(this,"wikiSections");i(this,"deploymentImages");i(this,"deployments");i(this,"projects");i(this,"metrics");i(this,"workspaceAdmin");i(this,"workspaces");i(this,"updateWorkspace");i(this,"createDeployment");i(this,"createProject");i(this,"delete");i(this,"onDelete",async()=>{await this.delete.call(),this.delete.state==="loaded"&&qe.routerStore.push("/")});this.workspaces=this.parent,this.repos={update:new u({path:this.api,method:"PUT"}),createDeployment:new u({path:`${this.api}/deployments`,method:"POST"})},this.delete=new u({path:this.api,method:"DELETE"}),this.updateWorkspace=new zo(this),this.createProject=new Ko(this),this.forms={createDeployment:this.createDeployment,createProject:this.createProject,update:this.updateWorkspace},this.deployments=new oa(this),this.projects=new na(this),this.wikiSections=new la(this),this.deploymentImages=new ua(this),this.metrics=new ma(this),this.workspaceAdmin=new Qo(this),this.dependents=[this.deployments,this.deploymentImages,this.workspaceAdmin,this.metrics,this.wikiSections],rs(this,this.updateWorkspace.submit),Se(this,this.delete)}get id(){return this.data.id}get name(){return this.data.name}get users(){return this.data.users}get resources(){return this.data.properties.resources}get cpuCount(){return this.resources.cpuCount}get memoryCount(){return this.resources.memoryCount}get storageCount(){return this.resources.storageCount||0}get link(){return`/w/${this.id}`}get api(){return`/api/workspaces/${this.id}`}}var xa=Object.defineProperty,Ea=Object.getOwnPropertyDescriptor,Je=(s,e,r,o)=>{for(var a=o>1?void 0:o?Ea(e,r):e,n=s.length-1,l;n>=0;n--)(l=s[n])&&(a=(o?l(e,r,a):l(a))||a);return o&&a&&xa(e,r,a),a};class Pe{constructor(e){i(this,"_selectedWorkspace");i(this,"wikiEdit");i(this,"workspaces");i(this,"count",0);i(this,"selectWorkspace",e=>{const r=this.workspaces.getBy("id",e)[0];r&&(this.selectedWorkspace=r)});this.rootStore=e,this.workspaces=new ha,this.wikiEdit=!1,G(this),ie.on(J.USERLOAD.onLoad.type,()=>{this.workspaces.load()})}set selectedWorkspace(e){!e||(this.rootStore.routerStore.push(e.link),this._selectedWorkspace=this.selectedWorkspace)}get selectedWorkspace(){const{wid:e}=this.rootStore.routerStore.params;let r;return e?r=this.workspaces.getBy("id",e)[0]:this._selectedWorkspace!==void 0?r=this._selectedWorkspace:r=this.workspaces.workspaces[0],this._selectedWorkspace=r,r}get selectedDeployment(){const{did:e}=this.rootStore.routerStore.params;if(this.selectedWorkspace)return this.selectedWorkspace.deployments.getBy("id",e)[0]}get selectedWikiSection(){const{sectionId:e}=this.rootStore.routerStore.params;if(this.selectedWorkspace)return this.selectedWorkspace.wikiSections.getBy("id",e)[0]}get selectedWikiPage(){const{pageId:e}=this.rootStore.routerStore.params;if(this.selectedWikiSection)return this.selectedWikiSection.wikiPages.getBy("id",e)[0]}}Je([T],Pe.prototype,"_selectedWorkspace",2);Je([T],Pe.prototype,"wikiEdit",2);Je([T],Pe.prototype,"count",2);var fa=Object.defineProperty,ya=Object.getOwnPropertyDescriptor,wa=(s,e,r,o)=>{for(var a=o>1?void 0:o?ya(e,r):e,n=s.length-1,l;n>=0;n--)(l=s[n])&&(a=(o?l(e,r,a):l(a))||a);return o&&a&&fa(e,r,a),a};class cs{constructor(){i(this,"alerts",[]);this.initEvents(),G(this)}push(e){this.alerts.push(h({key:new Date().getTime()+Math.random(),autoHideDuration:6e3},e))}get(){return this.alerts}remove(e){return()=>{this.alerts=this.alerts.filter(r=>{r.key!=e.key})}}initEvents(){Object.values(Z).forEach(e=>{ie.on(e.type,r=>{this.push({message:e.data.message,variant:e.data.variant})})})}}wa([T],cs.prototype,"alerts",2);var ka=Object.defineProperty,ba=Object.getOwnPropertyDescriptor,ps=(s,e,r,o)=>{for(var a=o>1?void 0:o?ba(e,r):e,n=s.length-1,l;n>=0;n--)(l=s[n])&&(a=(o?l(e,r,a):l(a))||a);return o&&a&&ka(e,r,a),a};class Ze extends y{constructor(e){super({});i(this,"confirmDelete");i(this,"count",0);i(this,"sideBarOpen",!1);i(this,"setDeleteTarget",(e,r)=>{this.confirmDelete.setTarget(e,r),this.confirmDelete.dialog.onOpen()});i(this,"toggleSidebar",()=>{this.sideBarOpen=!this.sideBarOpen});this.rootStore=e,this.confirmDelete=new Gt,this.forms={confirmDelete:this.confirmDelete},G(this)}}ps([T],Ze.prototype,"count",2);ps([T],Ze.prototype,"sideBarOpen",2);class Ca extends y{constructor(e){super();i(this,"users");i(this,"editUserDialog");i(this,"createUserDialog");var r;this.rootStore=e,this.users=new wo,this.editUserDialog=new Zr,this.createUserDialog=new pe,(r=e.authStore.user.repo)==null||r.onLoad.subscribe(o=>{console.log("authstore onload admin",o),this.load()}),this.dependents=[this.users]}}class va{constructor(e){i(this,"routerStore");i(this,"authStore");i(this,"workspacesStore");i(this,"snackbarStore");i(this,"uiStore");i(this,"adminStore");this.routerStore=new Vo(this,e),this.authStore=new ls(this),this.workspacesStore=new Pe(this),this.snackbarStore=new cs,this.uiStore=new Ze(this),this.adminStore=new Ca(this)}get stores(){return{[Le]:this.routerStore,[$]:this.authStore,[$e]:this.workspacesStore,[kr]:this.snackbarStore,[br]:this.uiStore,[Cr]:this.adminStore}}}const ds=Zs(),qe=new va(ds),Sa=t.exports.createContext(qe.stores),m=()=>t.exports.useContext(Sa),Pa=p(s=>{const{authstore:e}=m();if(e.state=="unauthed")return t.exports.createElement(Q,{to:"/login"});switch(e.state){case"loggedin":return s.children;default:return"loading..."}}),I=p(s=>{const{authstore:e}=m();if(e.state=="unauthed")return t.exports.createElement(Q,{to:"/login"});switch(e.state){case"loggedin":return t.exports.createElement(L,h({},s));default:return null}}),me=p(s=>{const{authstore:e}=m();switch(e.state){case"loggedin":return t.exports.createElement(Q,{to:"/"});case"unauthed":return t.exports.createElement(L,h({},s));default:return null}});p(s=>{const{authstore:e}=m();switch(e.user.state){case"loaded":return t.exports.createElement(I,h({},s));default:return null}});const Xe=s=>s.if?s.children:null,us=s=>{const{array:e,permissions:r}=s;let o=!1;for(const a of e)if(r.has(a)){o=!0;break}return o?s.children:null},Qe=p(s=>{var n;const{authstore:e}=m(),{roles:r,wid:o}=s;let a=e.user.permissions.roles;return o&&(a=((n=e.user.permissions.getWorkspacePermission(o))==null?void 0:n.roles)||a),t.exports.createElement(us,{array:r,permissions:a},s.children)});p(s=>{var n;const{authstore:e}=m(),{permissions:r,wid:o}=s;let a=e.user.permissions.permissions;return o&&(a=((n=e.user.permissions.getWorkspacePermission(o))==null?void 0:n.permissions)||a),t.exports.createElement(us,{array:r,permissions:a},s.children)});const O=p(s=>{var o;const{workspacesstore:e}=m();return e.workspaces.state=="loaded"?((o=e.selectedWorkspace)==null?void 0:o.id)?t.exports.createElement(I,h({},s)):t.exports.createElement(Q,{to:"/w/new"}):null});p(s=>{const{workspacesstore:e}=m(),r=e.selectedWorkspace;if(r==null)return null;switch(r.deployments.state){case"reloading":return t.exports.createElement(I,h({},s));case"loaded":return t.exports.createElement(I,h({},s));default:return null}});p(s=>{const{workspacesstore:e}=m(),r=e.selectedWorkspace;if(r==null)return null;switch(r.projects.state){case"reloading":return t.exports.createElement(I,h({},s));case"loaded":return t.exports.createElement(I,h({},s));default:return null}});H($e)(p(s=>{const{workspacesstore:e}=m(),r=e.selectedWorkspace;if(r==null)return null;switch(r.wikiSections.state){case"reloading":return t.exports.createElement(I,h({},s));case"loaded":return t.exports.createElement(I,h({},s));default:return null}}));const ms=p(s=>{const{form:e,workspace:r}=s,o=r.deploymentImages,a=o.getTypes(),n=e.get("type")||o.types[0],l=e.get("version"),c=o.getVersions(n),d=S=>De=>{e.onChange(S)(De.target.value)},x=S=>(e.onChange("version")(void 0),d("type")(S)),E=S=>d("version")(S);return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(ke,B(h({},s),{id:"type",label:"Type",defaultValue:a[0],options:a,onChange:x,value:n})),t.exports.createElement(ke,B(h({},s),{id:"version",label:"Version",defaultValue:c[0],options:c,onChange:E,value:l})))}),Da=p(s=>{const{workspacesstore:e}=m(),r=e.selectedWorkspace;if(!r)return null;const o=r.deployments.createDeployment;return t.exports.createElement(K,null,t.exports.createElement(f,{variant:"h4"},"Create Deployment"),t.exports.createElement(Ra,{form:o}))}),Ra=p(s=>{const{form:e}=s,r=e.deployments.workspace;return t.exports.createElement(Ct,{form:e},t.exports.createElement(v,null,"Deployment Name"),t.exports.createElement(w,{form:e,id:"name",label:"deployment name",autoComplete:"off"}),t.exports.createElement(v,null,"Sudo Password"),t.exports.createElement(w,{form:e,id:"sudoPassword",type:"password",label:"Sudo Password",autoComplete:"current-password"}),t.exports.createElement(v,null,"Container Image"),t.exports.createElement(ms,{form:e,workspace:r}),t.exports.createElement(v,null,"Scaling Method"),t.exports.createElement(Ba,{form:e}),t.exports.createElement(v,null,"Resources"),t.exports.createElement(f,{variant:"body1"},"Specify the maximum amount of resources the deployment can use."),t.exports.createElement(Lr,{form:e}),t.exports.createElement(j,{form:e}))}),Wa="_iframeWrapper_1z0e6_1",_a="_iframe_1z0e6_1";var Ua={iframeWrapper:Wa,iframe:_a};const Na=H($e)(p(s=>{const{workspacesstore:e}=m(),[r,o]=t.exports.useState("loading"),a=e.selectedDeployment;return a?(a.id,t.exports.createElement(xo,null,t.exports.createElement("iframe",{id:Ua.iframe,src:`https://${a.proxyUrl}`,onLoad:()=>{o("loaded")}}))):null})),Ia=s=>{const{workspacesstore:e,uistore:r}=m(),o=e.selectedDeployment,a=o==null?void 0:o.forms.edit;return t.exports.createElement(K,null,t.exports.createElement(Oa,{form:a}))},Oa=p(s=>{const{routerstore:e}=m(),{form:r}=s;return console.log(JSON.stringify(r==null?void 0:r.errors),r==null?void 0:r.isValid),r?t.exports.createElement(Ct,{form:r},t.exports.createElement(v,null,"Deployment Name"),t.exports.createElement(w,{form:r,id:"name",label:"name",autoComplete:"off"}),t.exports.createElement(v,null,"Resources"),t.exports.createElement(f,{variant:"body1"},"Specify the maximum amount of resources the deployment can use:"),t.exports.createElement(v,null,"Container Image"),t.exports.createElement(ms,{form:r,workspace:r.deployment.workspace}),t.exports.createElement(be,{form:r}),t.exports.createElement(j,{form:r,cancel:()=>{e.goBack()},submit:async()=>{console.log("SUBMIT",r,r.payload),await r.call()},labels:["Cancel","Edit"]})):null}),Fa={FAILED:t.exports.createElement(C,{style:{backgroundColor:"red"},label:"Error"}),SUCCESS:t.exports.createElement(C,{style:{backgroundColor:"red"},label:"Error"}),STARTING:t.exports.createElement(C,{style:{backgroundColor:"red"},label:"Error"}),STOPPED:t.exports.createElement(C,{style:{backgroundColor:"red"},label:"STOPPED"}),PENDING:t.exports.createElement(C,{color:"secondary",label:"PENDING"}),CREATING:t.exports.createElement(C,{color:"secondary",label:"CREATING"}),RUNNING:t.exports.createElement(C,{color:"primary",label:"RUNNING"}),UPDATING:t.exports.createElement(C,{color:"secondary",label:"UPDATING"}),DELETING:t.exports.createElement(C,{style:{backgroundColor:"red"},label:"DELETING"}),UNKNOWN:t.exports.createElement(C,{style:{backgroundColor:"purple"},label:"UNKNOWN"})},Ta=s=>{const{deployment:e}=s;return t.exports.createElement("div",{style:{paddingTop:"15px"}},Fa[e.status]||null)},Aa=s=>{const{deployment:e}=s;return t.exports.createElement(Gr,{variant:"contained",color:"primary",style:{bottom:3,right:3,position:"absolute"},to:e.link,disabled:e.status!=="RUNNING"},"Launch \u{1F680}")},et=({icon:s,label:e,value:r})=>r===void 0?null:t.exports.createElement(k,{item:!0,xs:4},t.exports.createElement(C,{icon:s,label:e+r})),Ma=s=>{const{deployment:e}=s,{cpuCount:r,memoryCount:o,storageCount:a}=e;return t.exports.createElement(k,{container:!0,style:{paddingTop:"20px"}},t.exports.createElement(et,{icon:t.exports.createElement(nt,null),label:"CPU: ",value:r}),t.exports.createElement(et,{icon:t.exports.createElement(it,null),label:"RAM: ",value:o}),t.exports.createElement(et,{icon:t.exports.createElement(Ne,null),label:"Storage: ",value:a}))},La=p(s=>{const{deployment:e}=s,{routerstore:r,uistore:o}=m();return t.exports.createElement("div",{style:{position:"absolute",top:"2%",right:"2%"}},t.exports.createElement(Ge,{options:[{name:"Edit",onClick:()=>{r.push(e.link+"/edit")}},{name:"Info",onClick:()=>{r.push(e.link+"/info")}},{name:"Delete",onClick:()=>{o.setDeleteTarget(e.name,e.delete.call)}}]}))}),$a=s=>{const{deployment:e}=s;return t.exports.createElement(qs,{style:{width:"400px",minWidth:"400px",height:"256px",padding:"20px",position:"relative"}},t.exports.createElement(f,{variant:"h4",color:"primary",noWrap:!0},e.name),t.exports.createElement(La,{deployment:e}),t.exports.createElement(Ta,{deployment:e}),t.exports.createElement(Ma,{deployment:e}),t.exports.createElement(Aa,{deployment:e}))},ja=p(({workspace:s})=>(console.log(s.deployments),t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(k,{container:!0,direction:"row",spacing:5,alignItems:"flex-start",justifyContent:"flex-start"},s.deployments.map(e=>t.exports.createElement(k,{item:!0,key:e.id},t.exports.createElement($a,{deployment:e}))))))),Ba=p(s=>{const{form:e}=s,r=[{value:"ALWAYS_ON",label:"Always On"},{value:"ON_DEMAND",label:"On Demand"}],o=e.get("scalingMethod"),a=n=>l=>{e.onChange(n)(l.target.value)};return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(ke,B(h({},s),{id:"type",label:"Type",defaultValue:r[0],options:r,onChange:a("scalingMethod"),value:o})))}),Ga="_textarea_1m4mx_1";var Va={textarea:Ga};const Ka={FAILED:t.exports.createElement(C,{style:{backgroundColor:"red"},label:"Error"}),SUCCESS:t.exports.createElement(C,{style:{backgroundColor:"red"},label:"Error"}),STARTING:t.exports.createElement(C,{style:{backgroundColor:"red"},label:"Error"}),PENDING:t.exports.createElement(C,{color:"secondary",label:"PENDING"}),CREATING:t.exports.createElement(C,{color:"secondary",label:"CREATING"}),RUNNING:t.exports.createElement(C,{color:"primary",label:"RUNNING"}),UPDATING:t.exports.createElement(C,{color:"secondary",label:"UPDATING"}),DELETING:t.exports.createElement(C,{style:{backgroundColor:"red"},label:"DELETING"}),UNKNOWN:t.exports.createElement(C,{style:{backgroundColor:"purple"},label:"UNKNOWN"})},za=s=>{const{deployment:e}=s;return t.exports.createElement("div",{style:{paddingTop:"15px"}},Ka[e.status]||null)},Ha=p(s=>{const{deployment:e}=s;if(!e)return null;const o=e.logs.logs;return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(f,{variant:"h4"},"Logs"),t.exports.createElement("textarea",{className:Va.textarea,disabled:!0,value:o}))}),hs=s=>t.exports.createElement(k,{item:!0,style:{width:"100%",height:"37vh"}},s.children),Ya=p(s=>{const{deployment:e}=s;if(!e)return null;const r=e==null?void 0:e.metrics;return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(f,{variant:"h4"},"Metrics"),t.exports.createElement(k,{container:!0,item:!0,direction:"column"},t.exports.createElement(hs,null,t.exports.createElement(ue,h({},r.cpuChart))),t.exports.createElement(hs,null,t.exports.createElement(ue,h({},r.memoryChart)))))}),Ja=s=>{const{deployment:e}=s,r=e.data.failureReason;return e.status==="FAILED"?t.exports.createElement(vt,{severity:"error"},r):null},Za=p(s=>{const{workspacesstore:e}=m(),r=e.selectedDeployment;return r?t.exports.createElement(K,null,t.exports.createElement(f,{variant:"h3"},"Deployment: ",r.name),t.exports.createElement(f,{variant:"h6"},t.exports.createElement(za,{deployment:r}),t.exports.createElement("br",null),t.exports.createElement(Ja,{deployment:r}),t.exports.createElement("br",null)),t.exports.createElement("div",{style:{height:"60vh",display:"block"}},t.exports.createElement(k,{container:!0,direction:"row"},t.exports.createElement(k,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3},t.exports.createElement(Ya,{deployment:r})),t.exports.createElement(k,{item:!0,xs:12,sm:6,md:6,lg:9,xl:9},t.exports.createElement(Ha,{deployment:r}))))):null}),qa=W(s=>({margin:{margin:s.spacing(1,0,1,0)},description:{paddingTop:"10px",paddingBottom:"5px"}})),Xa=p(s=>{const e=qa(),{workspacesstore:r}=m(),o=r.workspaces.createWorkspaceForm;return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(f,{variant:"h4"},"Create Workspace"),t.exports.createElement(f,{variant:"body1",className:e.description},"Please fill out the form below and press 'Create' to create a workspace."),t.exports.createElement(w,{autoFocus:!0,form:o,className:e.margin,margin:"dense",id:"name",label:"Workspace Name",type:"text",fullWidth:!0}),t.exports.createElement(v,null,"Resources"),t.exports.createElement(f,{variant:"body1",className:e.description},"Optionally, specify the maximum amount of resources the workspace can use."),t.exports.createElement(be,{form:o}),t.exports.createElement(Lt,{form:o}),t.exports.createElement(j,{form:o}))}),Qa=p(()=>{const{workspacesstore:s,uistore:e}=m(),r=s.workspaces,o=s.selectedWorkspace;return o?t.exports.createElement(K,null,t.exports.createElement(ja,{workspace:o}),t.exports.createElement(Br,{link:`${r.workspaceUrl}/new`})):null}),en=s=>{const{metrics:e}=s;return e.state==="error"?t.exports.createElement(vt,{severity:"error"},"This workspace has no configured resource limitations!"):null},tn=p(s=>{const{workspacesstore:e}=m(),r=e.selectedWorkspace;if(!r)return null;const o=r==null?void 0:r.metrics;return t.exports.createElement(K,null,t.exports.createElement(f,{variant:"h4"},r.name," Metrics"),t.exports.createElement("br",null),t.exports.createElement(en,{metrics:o}),t.exports.createElement("br",null),t.exports.createElement(k,{container:!0,spacing:4},t.exports.createElement(k,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},t.exports.createElement(ue,h({},o.cpuChart))),t.exports.createElement(k,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},t.exports.createElement(ue,h({},o.memoryChart))),t.exports.createElement(k,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},t.exports.createElement(ue,h({},o.storageChart)))))}),sn=()=>t.exports.createElement(es,null,t.exports.createElement(Xa,null)),rn=p(s=>{const{workspacesstore:e}=m(),{workspaces:r}=e;if(console.log("WorkspaceRedirect",r),r.state!="loaded")return null;const o=e.selectedWorkspace;return o?t.exports.createElement(Q,{to:o.link}):t.exports.createElement(Q,{to:"/w/new"})}),on=p(s=>{const{workspacesstore:e,uistore:r}=m(),o=e.selectedWorkspace;if(!o)return null;const a=o.updateWorkspace;return t.exports.createElement(K,null,t.exports.createElement(f,{variant:"h4"},"Update Workspace"),t.exports.createElement(v,null,"Workspace Name"),t.exports.createElement(w,{form:a,id:"name",label:"Workspace Name",autoComplete:"off"}),t.exports.createElement(v,null,"Resources"),t.exports.createElement(f,{variant:"body1"},"Specify the maximum amount of resources the deployment can use:"),t.exports.createElement(be,{form:a}),t.exports.createElement(Lt,{form:a}),t.exports.createElement("div",{style:{float:"left"}},t.exports.createElement(D,{onClick:async()=>{r.setDeleteTarget(o.name,o.onDelete)},color:"secondary"},"Delete")),t.exports.createElement("div",{style:{float:"right"}},t.exports.createElement(j,{form:a,labels:["Cancel","Edit"],submit:()=>{a.call()}})))}),gs="/w/:wid/admin/",an=()=>t.exports.createElement(K,null,t.exports.createElement(ne,null,t.exports.createElement(L,{path:`${gs}users`,component:Xo}),t.exports.createElement(L,{path:`${gs}`,component:Jo}))),nn="_sidebar_161eo_1",ln="_topsidebar_161eo_9",cn="_nested_161eo_13",pn="_editorWrapper_161eo_1",dn="_wrapper_161eo_1";var he={sidebar:nn,topsidebar:ln,nested:cn,editorWrapper:pn,wrapper:dn};const un=p(s=>{const{page:e}=s,{workspacesstore:r}=m(),o=e.pageForm;return r.wikiEdit?t.exports.createElement(St,{value:o.get("title"),onChange:o.onChange("title"),style:{fontSize:"3rem",letterSpacing:"0rem"}}):t.exports.createElement(f,{variant:"h3",style:{paddingTop:7}},o.get("title"))}),mn=p(s=>{const{page:e}=s,r=e.pageForm;return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(xs,{page:e}),t.exports.createElement("div",{id:he.editorWrapper},t.exports.createElement(Xs,{language:"markdown",value:r.get("body"),loading:t.exports.createElement("div",null),onChange:(o,a)=>{!o||r.onChange("body")(o)},options:{wordWrap:"on",lineNumbers:"off",wrappingIndent:"indent"}})))}),hn=s=>{const{page:e}=s,r=e.pageForm;return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(xs,{page:e}),t.exports.createElement(er,{source:r.get("body")}))},gn=p(s=>{const{workspacesstore:e}=m(),r=e.selectedWikiPage;return r==null?t.exports.createElement("div",{id:he.wrapper},"Wiki page not found"):t.exports.createElement("div",{id:he.wrapper},e.wikiEdit?t.exports.createElement(mn,{page:r}):t.exports.createElement(hn,{page:r}))}),xs=s=>{const{page:e}=s;return t.exports.createElement(k,{container:!0},t.exports.createElement(k,{item:!0,xs:9,sm:11},t.exports.createElement(un,{page:e})),t.exports.createElement(k,{item:!0,xs:3,sm:1},t.exports.createElement(_,{onClick:e.onSave},t.exports.createElement(Qs,null))))},xn=W(s=>({root:{display:"flex",flexDirection:"column",width:360},lists:{backgroundColor:s.palette.background.paper,marginTop:s.spacing(1)},nested:{paddingLeft:s.spacing(6)},selected:{paddingLeft:s.spacing(6),backgroundColor:"#e3e3e3"}})),En=p(s=>{var c;const{page:e}=s,r=xn(),{uistore:o,workspacesstore:a}=m(),n=[{label:"Delete",onClick:()=>{o.setDeleteTarget(e.data.title,e.onDelete)}}],l=((c=a.selectedWikiPage)==null?void 0:c.id)===e.id;return t.exports.createElement("li",null,t.exports.createElement(jt,{menuItems:n},t.exports.createElement(fe,{button:!0,component:N,to:e.link,className:l?r.selected:r.nested},t.exports.createElement(Fe,{primary:e.data.title}))))}),fn=p(s=>{const{section:e,open:r,onClick:o}=s,a=e.sectionForm,{uistore:n}=m();console.log(e.id);const l=[{label:"Delete",onClick:()=>{n.setDeleteTarget(e.data.name,()=>{console.log(e.id),e.onDelete()})}}],c=d=>{d.key==="Enter"&&e.onSubmitNameChange()};return t.exports.createElement(fe,null,t.exports.createElement(Fe,null,t.exports.createElement(jt,{menuItems:l},t.exports.createElement(St,{value:a.get("name"),onChange:a.onChange("name"),onKeyDown:c}))),t.exports.createElement(Ae,{title:"Add Page To Section","aria-label":"Add Page To Section"},t.exports.createElement(_,{onClick:e.wikiPages.onAddPage},t.exports.createElement(Ie,{color:"primary"}))),t.exports.createElement("div",null,t.exports.createElement(_,{onClick:o},r?t.exports.createElement(tr,null):t.exports.createElement(sr,null))))}),yn=p(s=>{var d;const{section:e}=s,{workspacesstore:r}=m(),o=((d=r.selectedWikiSection)==null?void 0:d.id)===e.id,a=e.wikiPages,[n,l]=t.exports.useState(!1);t.exports.useEffect(()=>{l(o||n)},[o]);const c=()=>{l(!n)};return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement(fn,{section:e,open:n,onClick:c}),t.exports.createElement(rr,{component:"li",in:n,timeout:"auto",unmountOnExit:!0},t.exports.createElement(Y,{disablePadding:!0},a.map(x=>t.exports.createElement(En,{key:x.id,page:x})))))}),wn=p(s=>{const{workspacesstore:e}=m(),r=e.selectedWorkspace;if(!r)return null;const o=r.wikiSections,a=e.selectedWikiPage;return t.exports.createElement("div",{className:he.sidebar},t.exports.createElement("div",{className:he.topsidebar},t.exports.createElement(fe,null,t.exports.createElement(or,{placeholder:"Search..."}),t.exports.createElement(Ae,{title:"Add Section","aria-label":"Add Section"},t.exports.createElement(_,{onClick:o.onAddSection},t.exports.createElement(Ie,{color:"primary"}))),t.exports.createElement(Ae,{title:"Edit Selected Wiki Page","aria-label":"Edit Selected Wiki Page"},t.exports.createElement(_,{color:"primary",disabled:a==null,onClick:()=>{e.wikiEdit=!e.wikiEdit}},t.exports.createElement(ar,null))))),t.exports.createElement(Y,null,o.map(n=>t.exports.createElement(yn,{key:n.id,section:n}))))}),kn=()=>null,bn=()=>null,tt="/w/:wid/wiki/",Cn=()=>t.exports.createElement(Qt,null,t.exports.createElement(wn,null),t.exports.createElement(ne,null,t.exports.createElement(L,{path:`${tt}:sectionId/pages/:pageId`,component:gn}),t.exports.createElement(L,{path:`${tt}:sectionId/pages`,component:kn}),t.exports.createElement(L,{path:`${tt}`,component:bn}))),vn=({history:s})=>t.exports.createElement(nr,{history:s},t.exports.createElement(ne,null,t.exports.createElement(me,{path:"/login",component:Mo}),t.exports.createElement(me,{path:"/signup",component:Lo}),t.exports.createElement(me,{path:"/forgotPassword",component:Ao}),t.exports.createElement(me,{path:"/verify-account",component:$o}),t.exports.createElement(me,{path:"/change-password",component:Oo})),t.exports.createElement(Pa,null,t.exports.createElement(ne,null,t.exports.createElement(I,{path:"/logout",component:Io}),t.exports.createElement(I,{path:"/w/new",component:sn}),t.exports.createElement(O,{path:"/w/:wid/new",component:Da}),t.exports.createElement(O,{path:"/w/:wid/wiki",component:Cn}),t.exports.createElement(O,{path:"/w/:wid/metrics",component:tn}),t.exports.createElement(O,{path:"/w/:wid/admin",component:an}),t.exports.createElement(O,{path:"/w/:wid/edit",component:on}),t.exports.createElement(O,{path:"/w/:wid/d/:did/info",component:Za}),t.exports.createElement(O,{path:"/w/:wid/d/:did/edit",component:Ia}),t.exports.createElement(O,{path:"/w/:wid/d/:did/",component:Na}),t.exports.createElement(O,{path:"/w/:wid",component:Qa}),t.exports.createElement(I,{path:"/admin",component:Eo}),t.exports.createElement(O,{path:"/edit-profile",component:No}),t.exports.createElement(O,{path:"/",component:rn})))),Sn=ir({palette:{primary:{main:"#2196f3",light:"#4dabf5",dark:"#1769aa",contrastText:"#fff"},secondary:{main:"#ff9100",light:"#ffa733",dark:"#b26500",contrastText:"#000"}},overrides:{MuiAvatar:{root:{backgroundColor:"#ff9100"}},MuiButton:{root:{margin:"20px"}}}});lr({isolateGlobalState:!0,enforceActions:"never"});cr.exports.render(t.exports.createElement(pr,{theme:Sn},t.exports.createElement(dr,h({},qe.stores),t.exports.createElement(vn,{history:ds}),t.exports.createElement(To,null))),document.getElementById("root"));
