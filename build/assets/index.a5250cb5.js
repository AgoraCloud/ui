var Xt=Object.defineProperty,Qt=Object.defineProperties;var er=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var Ee=(r,t,s)=>t in r?Xt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,x=(r,t)=>{for(var s in t||(t={}))Ke.call(t,s)&&Ee(r,s,t[s]);if(ie)for(var s of ie(t))He.call(t,s)&&Ee(r,s,t[s]);return r},z=(r,t)=>Qt(r,er(t));var ce=(r,t)=>{var s={};for(var o in r)Ke.call(r,o)&&t.indexOf(o)<0&&(s[o]=r[o]);if(r!=null&&ie)for(var o of ie(r))t.indexOf(o)<0&&He.call(r,o)&&(s[o]=r[o]);return s};var n=(r,t,s)=>(Ee(r,typeof t!="symbol"?t+"":t,s),s);import{F as b,l as W,A as u,a as tr,m as D,o as c,r as e,b as ze,T as we,S as rr,M as G,c as g,C as ke,I as Ye,d as ye,e as Je,f as Ze,g as pe,i as V,B as S,h as sr,j as fe,k as R,n as or,L as _,D as q,p as X,q as ar,s as Q,t as nr,u as lr,v as F,w as L,x as ir,P as qe,y as cr,z as pr,E as ur,G as Xe,H as Qe,J as mr,K as dr,N as et,O as tt,Q as Y,R as rt,U as st,V as ot,W as at,X as nt,Y as ee,Z as K,_ as be,$ as ue,a0 as hr,a1 as Ce,a2 as xr,a3 as gr,a4 as Er,a5 as wr,a6 as kr,a7 as yr,a8 as Pe,a9 as fr,aa as te,ab as lt,ac as re,ad as O,ae as v,af as br,ag as Cr,ah as Pr,ai as vr,aj as Sr,ak as Wr,al as H,am as it,an as ct,ao as pt,ap as w,aq as ut,ar as mt,as as Dr,at as Rr,au as J,av as dt,aw as Ur,ax as f,ay as ht,az as xt,aA as _r,aB as Ir,aC as Nr,aD as ve,aE as Fr,aF as Tr,aG as Or,aH as Ar,aI as Mr,aJ as $r,aK as Lr,aL as Br,aM as jr,aN as Gr,aO as Vr}from"./vendor.e48dd231.js";import"cache-manager";import"swagger-ui-express";import"fastify-swagger";import"class-transformer/storage";const Kr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}};Kr();const Se="routerstore",A="authstore",We="workspacesstore",Hr="snackbarstore",zr="uistore",Yr="adminstore",gt={WIKISECTIONS:{onLoad:{type:"WIKISECTIONS_LOAD",data:{message:"Wiki Section Successfully: ",variant:"success"}},onError:{type:"WIKISECTION_ERR",data:{message:"Wiki Section Failure: ",variant:"error"}}},WIKIPAGES:{onLoad:{type:"WIKIPAGES_LOAD",data:{message:"Wiki Page Successfully: ",variant:"success"}},onError:{type:"WIKIPAGES_ERR",data:{message:"Wiki Page Failure: ",variant:"error"}}}},M={SIGNIN:{type:"SIGNIN",data:{message:"Successfully Logged In!",variant:"success"}},SIGNIN_ERR:{type:"SIGNIN",data:{message:"Failed to Login: ",variant:"error"}},SIGNUP:{type:"SIGNUP",data:{message:"Registered! Please check your email to verify your account.",variant:"success"}},SIGNUP_ERR:{type:"SIGNUP_ERR",data:{message:"Failed to Signup: ",variant:"error"}},VERIFY:{type:"VERIFY",data:{message:"Successfully Verified",variant:"success"}},VERIFY_ERR:{type:"VERIFY_ERR",data:{message:"Failed to Verify: ",variant:"error"}},PASSWORD_RESET:{type:"PASSWORD_RESET",data:{message:"Success: Please check your email to reset your password!",variant:"success"}},PASSWORD_RESET_ERR:{type:"PASSWORD_RESET_ERR",data:{message:"Failure: ",variant:"error"}},CHANGE_PASSWORD:{type:"CHANGE_PASSWORD",data:{message:"Successfully Changed Password",variant:"success"}},CHANGE_PASSWORD_ERR:{type:"CHANGE_PASSWORD_ERR",data:{message:"Change Password Failed: ",variant:"error"}},WORKSPACE_CRUD:{type:"WORKSPACE_CRUD",data:{message:"Workspace Successfully: ",variant:"success"}},WORKSPACE_ERR:{type:"WORKSPACE_ERR",data:{message:"Workspace Failure: ",variant:"error"}},DEPLOYMENT_CRUD:{type:"DEPLOYMENT_CRUD",data:{message:"Deployment Successfully: ",variant:"success"}},DEPLOYMENT_ERR:{type:"DEPLOYMENT_ERR",data:{message:"Deployment Failure: ",variant:"error"}},WIKI_CRUD:{type:"WIKI_CRUD",data:{message:"Wiki Successfully: ",variant:"success"}},WIKI_ERR:{type:"WIKI_ERR",data:{message:"Wiki Failure: ",variant:"error"}},USER_CRUD:{type:"USER_CRUD",data:{message:"User Successfully: ",variant:"success"}},USER_ERR:{type:"USER_ERR",data:{message:"User Failure: ",variant:"error"}},PROJECT_CRUD:{type:"PROJECT_CRUD",data:{message:"Project Successfully: ",variant:"success"}},PROJECT_ERR:{type:"PROJECT_ERR",data:{message:"Project Failure: ",variant:"error"}},PROJECT_LANE_CRUD:{type:"PROJECT_LANE_CRUD",data:{message:"Project Lane Successfully: ",variant:"success"}},PROJECT_LANE_ERR:{type:"PROJECT_LANE_ERR",data:{message:"Project Lane Failure: ",variant:"error"}},WORKSPACE_USER_CRUD:{type:"WORKSPACE_USERS_CRUD",data:{message:"Workspace User Successfully: ",variant:"success"}},WORKSPACE_USER_ERR:{type:"WORKSPACE_USERS_ERR",data:{message:"Workspace User Failure: ",variant:"error"}},LANE_TASK_CRUD:{type:"LANE_TASKS_CRUD",data:{message:"Project Task Successfully: ",variant:"success"}},LANE_TASK_ERR:{type:"LANE_TASKS_ERR",data:{message:"Project Task Failure: ",variant:"error"}}};var U;(function(r){r.User="user",r.SuperAdmin="super_admin",r.WorkspaceAdmin="workspace_admin"})(U||(U={}));const Jr=[U.SuperAdmin,U.User],Zr=[U.WorkspaceAdmin,U.User],Et=[];for(const r in U)Et.push({label:r,value:U[r]});var h;(function(r){r.ManageUser="users:manage",r.ManageWorkspace="workspaces:manage",r.CreateWorkspace="workspaces:create",r.ReadWorkspace="workspaces:read",r.UpdateWorkspace="workspaces:update",r.DeleteWorkspace="workspaces:delete",r.CreateDeployment="deployments:create",r.ReadDeployment="deployments:read",r.ProxyDeployment="deployments:proxy",r.UpdateDeployment="deployments:update",r.DeleteDeployment="deployments:delete",r.CreateWiki="wiki:create",r.ReadWiki="wiki:read",r.UpdateWiki="wiki:update",r.DeleteWiki="wiki:delete",r.CreateWikiSection="wiki_sections:create",r.ReadWikiSection="wiki_sections:read",r.UpdateWikiSection="wiki_sections:update",r.DeleteWikiSection="wiki_sections:delete",r.CreateWikiPage="wiki_pages:create",r.ReadWikiPage="wiki_pages:read",r.UpdateWikiPage="wiki_pages:update",r.DeleteWikiPage="wiki_pages:delete",r.CreateProject="projects:create",r.ReadProject="projects:read",r.UpdateProject="projects:update",r.DeleteProject="projects:delete",r.CreateProjectLane="project_lanes:create",r.ReadProjectLane="project_lanes:read",r.UpdateProjectLane="project_lanes:update",r.DeleteProjectLane="project_lanes:delete",r.CreateProjectTask="project_tasks:create",r.ReadProjectTask="project_tasks:read",r.UpdateProjectTask="project_tasks:update",r.DeleteProjectTask="project_tasks:delete"})(h||(h={}));const qr=[h.CreateWorkspace,h.ReadWorkspace,h.UpdateWorkspace,h.DeleteWorkspace],Xr=[h.CreateDeployment,h.ReadDeployment,h.ProxyDeployment,h.UpdateDeployment,h.DeleteDeployment,h.CreateWiki,h.ReadWiki,h.UpdateWiki,h.DeleteWiki,h.CreateWikiSection,h.ReadWikiSection,h.UpdateWikiSection,h.DeleteWikiSection,h.CreateWikiPage,h.ReadWikiPage,h.UpdateWikiPage,h.DeleteWikiPage,h.CreateProject,h.ReadProject,h.UpdateProject,h.DeleteProject,h.CreateProjectLane,h.ReadProjectLane,h.UpdateProjectLane,h.DeleteProjectLane,h.CreateProjectTask,h.ReadProjectTask,h.UpdateProjectTask,h.DeleteProjectTask];class Qr extends b{constructor(){super({data:{email:"",password:""},validator:W.SignInDto,submit:new u({path:"/api/auth/login",method:"POST",events:{onLoad:M.SIGNIN,onError:M.SIGNIN_ERR}})})}}class wt extends b{constructor(){super({data:{fullName:"",email:"",password:""},validator:W.CreateUserDto,submit:new u({path:"/api/auth/register",method:"POST",events:{onLoad:M.SIGNUP,onError:M.SIGNUP_ERR}})})}}class es extends b{constructor(){super({data:{token:""},validator:W.VerifyAccountDto,submit:new u({path:"/api/auth/verify-account",method:"POST",events:{onLoad:M.VERIFY,onError:M.VERIFY_ERR}})})}}class ts extends b{constructor(){super({data:{email:""},validator:W.ForgotPasswordDto,submit:new u({path:"/api/auth/forgot-password",method:"POST"})})}}class rs extends b{constructor(){super({data:{token:"",password:"",confirmPassword:""},validator:W.ChangePasswordDto,submit:new u({path:"/api/auth/change-password",method:"POST"})})}}class ss extends b{constructor(t){super({repo:t.repo,validator:W.UpdateUserDto,submit:new u({path:"/api/user",method:"PUT",events:{onLoad:M.USER_CRUD,onError:M.USER_ERR}})})}}class kt extends b{constructor(t){super({repo:t.repo});this.permissions=t}onSelectPermission(t){return()=>{let s;this.hasPermission(t)?s=tr.exports.without(this.data.permissions,t):s=[...this.data.permissions,t],this.onChange("permissions")(s)}}hasPermission(t){return this.data.permissions.includes(t)}onSelectRole(t){return()=>{let s=[t];this.onChange("roles")(s)}}hasRole(t){return this.data.roles.includes(t)}}class os extends kt{constructor(t,s){super(t);this.permissions=t,this.workspace=s,this.submit=new u({path:this.permissions.api,method:"PUT"})}}class as extends kt{constructor(t){super(t);this.permissions=t,this.submit=new u({path:this.permissions.api,method:"PUT"})}}class ns extends b{constructor(t){super({data:{fullName:t.fullName,password:""},submit:new u({path:t.api,method:"PUT"})});this.user=t}get payload(){return this.data.password!==""?{fullName:this.data.fullName,password:this.data.password}:{fullName:this.data.fullName}}}const ls=D(r=>({root:{color:"white","& .MuiOutlinedInput-notchedOutline":{color:"white",borderColor:"white"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"}},input:{"&::selection":{color:"white"}}})),is=D({root:{color:"white","&.Mui-focused":{color:"white"}}});c(r=>{const{workspacesstore:t}=m(),s=t.workspaces,o=s.workspaces,a=s.state==="loading",l=ls(),i=is(),d=(p,k)=>{t.selectedWorkspace=k};return a?null:e.exports.createElement(ze,{id:"combo-box-demo",loading:a,classes:l,value:t.selectedWorkspace,onChange:d,options:o,getOptionLabel:p=>p.name,style:{width:300},renderInput:p=>e.exports.createElement(we,z(x({},p),{InputLabelProps:{classes:i},label:"Select Workspace...",variant:"outlined"}))})});const De=c(r=>{const d=r,{form:t,id:s,options:o}=d,a=ce(d,["form","id","options"]),l=t.get(s),i=t.getError(s);return e.exports.createElement(rr,x({error:l&&i!=null,value:l,style:{width:"100%"},onChange:t.onChange(s),variant:"outlined"},a),o.map(p=>e.exports.createElement(G,{key:p.label,value:p.value},p.label)))});c(r=>e.exports.createElement(De,z(x({},r),{id:"roles",options:Et,multiple:!0})));const E=c(r=>{const k=r,{form:t,id:s,children:o,workspaceCheck:a,defaultVal:l}=k,i=ce(k,["form","id","children","workspaceCheck","defaultVal"]);let d=t.get(s);const p=t.errors[s];return e.exports.createElement(we,x({onChange:t.onChange(s),error:d&&p!=null,helperText:d?p:void 0,value:d,variant:"outlined",margin:"normal",autoComplete:"off",required:!0,fullWidth:!0,id:s,name:s,defaultValue:a&&Number(d)},i),o)}),yt=D(r=>({margin:{margin:r.spacing(1,0,1,0)},subtitle:{margin:r.spacing(1,0,1,0),color:"inherit",variant:"subtitle1"}})),cs=r=>{const t=yt(),{form:s}=r,[o,a]=e.exports.useState(!0),l=()=>{s.onChange("storageCount")(o?void 0:8),a(!o)};return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(me,{form:s}),e.exports.createElement(g,null,e.exports.createElement(ke,{checked:o,onChange:l,name:"checkedB",color:"primary"}),"Persist deployment"),o?e.exports.createElement(E,{form:s,className:t.margin,margin:"dense",id:"storageCount",label:"Storage",type:"number",InputProps:{startAdornment:e.exports.createElement(Ye,{position:"start"},e.exports.createElement(ye,null))},fullWidth:!0}):null)},me=({form:r})=>e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(us,{form:r}),e.exports.createElement(ms,{form:r})),ps=({form:r})=>e.exports.createElement(Re,{form:r,id:"storageCount",label:"Storage",icon:e.exports.createElement(ye,null)}),us=({form:r})=>e.exports.createElement(Re,{form:r,id:"cpuCount",label:"CPU Cores",icon:e.exports.createElement(Je,null)}),ms=({form:r})=>e.exports.createElement(Re,{form:r,id:"memoryCount",label:"RAM (GBs)",icon:e.exports.createElement(Ze,null)}),Re=({form:r,id:t,icon:s,label:o})=>{const a=yt();return e.exports.createElement(E,{form:r,className:a.margin,margin:"dense",id:t,label:o,type:"number",InputProps:{startAdornment:e.exports.createElement(Ye,{position:"start"},s)},defaultVal:r.get(t),fullWidth:!0})},ft={mouseX:null,mouseY:null},bt=r=>{const[t,s]=e.exports.useState(ft),{children:o,menuItems:a}=r,l=p=>{p.preventDefault(),s({mouseX:p.clientX-2,mouseY:p.clientY-4})},i=()=>{s(ft)},d=p=>()=>{p(),i()};return e.exports.createElement("div",{onContextMenu:l,style:{cursor:"context-menu"}},o,e.exports.createElement(pe,{keepMounted:!0,open:t.mouseY!==null,onClose:i,anchorReference:"anchorPosition",anchorPosition:t.mouseY!==null&&t.mouseX!==null?{top:t.mouseY,left:t.mouseX}:void 0},a.map(p=>e.exports.createElement(G,{onClick:d(p.onClick),key:p.label},p.label))))},Ue=r=>{const{onClick:t}=r;return e.exports.createElement(sr,{color:"primary","aria-label":"add",style:{position:"absolute",bottom:"40px",right:"50px"},onClick:t},e.exports.createElement(fe,null))},ds=V(Se)(c(r=>{const t=r[Se],{link:s}=r;return e.exports.createElement(Ue,{onClick:()=>{t.push(s)}})})),hs=r=>e.exports.createElement(S,x({variant:"contained",color:"primary",style:{bottom:3,right:3,position:"absolute"},component:_},r),r.children),$=c(r=>{const{routerstore:t}=m(),{form:s,labels:o}=r,a=t.goBack,l=async()=>{await s.call(),s.submit.state=="loaded"&&t.goBack()},i=r.cancel||a,d=r.submit||l,[p,k]=o||["Cancel","Create"],{isValid:y}=s;return e.exports.createElement("div",{style:{float:"right"}},e.exports.createElement(S,{onClick:i,color:"primary"},p),e.exports.createElement(S,{onClick:d,disabled:!y,color:"primary"},k))}),_e=r=>{const{options:t}=r,[s,o]=e.exports.useState(null),a=Boolean(s),l=p=>{o(p.currentTarget)},i=()=>{o(null)},d=p=>()=>{p.onClick(),i()};return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(R,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:l},e.exports.createElement(or,null)),e.exports.createElement(pe,{id:"long-menu",anchorEl:s,keepMounted:!0,open:a,onClose:i},t.map(p=>e.exports.createElement(G,{key:p.name,onClick:d(p)},p.name))))},C=r=>e.exports.createElement(g,{variant:"h6"},r.children),Ie=c(()=>{const{uistore:r}=m(),t=r.confirmDelete,{dialog:s,submit:o,name:a}=t;return e.exports.createElement(oe,{dialog:s},e.exports.createElement(q,null,"Confirm Delete"),e.exports.createElement(X,null,e.exports.createElement(ar,null,"Are you sure you want to delete",e.exports.createElement("br",null),a),e.exports.createElement(E,{autoFocus:!0,form:t,error:!t.valid,helperText:`type ${a} to delete`,margin:"dense",id:"name",label:"Confirm Delete",type:"text",fullWidth:!0})),e.exports.createElement(Q,null,e.exports.createElement(S,{onClick:s.onClose,color:"secondary"},"Cancel"),e.exports.createElement(S,{onClick:o,disabled:!t.valid,color:"primary"},"Delete")))});var xs=Object.defineProperty,gs=Object.getOwnPropertyDescriptor,Es=(r,t,s,o)=>{for(var a=o>1?void 0:o?gs(t,s):t,l=r.length-1,i;l>=0;l--)(i=r[l])&&(a=(o?i(t,s,a):i(a))||a);return o&&a&&xs(t,s,a),a};class Ct{constructor(){n(this,"name")}}Es([nr(),lr()],Ct.prototype,"name",2);var ws=Object.defineProperty,ks=Object.getOwnPropertyDescriptor,Ne=(r,t,s,o)=>{for(var a=o>1?void 0:o?ks(t,s):t,l=r.length-1,i;l>=0;l--)(i=r[l])&&(a=(o?i(t,s,a):i(a))||a);return o&&a&&ws(t,s,a),a};class se{constructor(t){n(this,"open",!1);n(this,"onOpen",()=>{this.open=!0,console.log("OPEN",this)});n(this,"onClose",()=>{this.open=!1});this.open=t||!1,L(this)}}Ne([F],se.prototype,"open",2);class Pt extends b{constructor(){super({validator:Ct,data:{name:""}});n(this,"dialog");n(this,"callBack");n(this,"name");n(this,"setTarget",(t,s)=>{this.name=t,this.callBack=s});n(this,"submit",async()=>{this.valid&&(await this.callBack(),this.dialog.onClose())});n(this,"reset",()=>{this.data.name=""});this.dialog=new se,L(this)}get valid(){return this.data.name===this.name}}Ne([F],Pt.prototype,"name",2);class Fe extends se{constructor(){super();n(this,"user");L(this)}setUserAndOpen(t){this.user=t,this.onOpen()}}Ne([F],Fe.prototype,"user",2);class ys extends Fe{}class fs extends Fe{}class vt extends ys{constructor(t,s){super();this.permissions=t,this.roles=s}}const St=new vt(Xr,Zr),Wt=new vt(qr,Jr),Dt=c(r=>{const{dialog:t}=r,{user:s}=t;if(console.log("PermissionsDialog",t,s),!s)return null;const o=s.permissions.permissionsForm;return e.exports.createElement(oe,{dialog:t},e.exports.createElement(q,null,"Permissions: ",s.fullName),e.exports.createElement(X,null,e.exports.createElement(io,{form:o,roles:t.roles}),e.exports.createElement(lo,{form:o,permissions:t.permissions})),e.exports.createElement(Q,null,e.exports.createElement($,{form:o,labels:["Cancel","Edit"],cancel:t.onClose,submit:async()=>{o.call(),console.log(JSON.stringify(o.payload))}})))}),oe=c(({dialog:r,children:t})=>{const{open:s,onClose:o}=r;return e.exports.createElement(ir,{open:s,onClose:o},t)}),bs=c(r=>{const{dialog:t,form:s}=r;return e.exports.createElement(oe,{dialog:t},e.exports.createElement(q,null,"Invite User"),e.exports.createElement(X,null,e.exports.createElement(C,null,"User Email"),e.exports.createElement(E,{form:s,id:"email"})),e.exports.createElement(Q,null,e.exports.createElement($,{form:s,labels:["Cancel","Invite"],cancel:t.onClose,submit:async()=>{await s.submit(),t.onClose()}})))}),Cs=c(r=>{const{adminstore:t}=m(),{editUserDialog:s}=t,{user:o}=s;if(!o)return null;const a=o.updateUserForm;return e.exports.createElement(oe,{dialog:s},e.exports.createElement(q,null,"Edit: ",o.fullName),e.exports.createElement(X,null,e.exports.createElement(C,null,"Full Name"),e.exports.createElement(E,{form:a,id:"fullName"}),e.exports.createElement(C,null,"Password"),e.exports.createElement(E,{form:a,id:"password",type:"password"})),e.exports.createElement(Q,null,e.exports.createElement($,{form:a,cancel:()=>{s.onClose()},submit:async()=>{await a.call(),s.onClose()},labels:["Cancel","Edit"]})))}),Ps=c(r=>{const{adminstore:t}=m(),{createUserDialog:s}=t,o=t.users.createUserForm;return e.exports.createElement(oe,{dialog:s},e.exports.createElement(q,null,"Create User"),e.exports.createElement(X,null,e.exports.createElement(C,null,"Full Name"),e.exports.createElement(E,{form:o,id:"fullName"}),e.exports.createElement(C,null,"Email"),e.exports.createElement(E,{form:o,id:"email"}),e.exports.createElement(C,null,"Password"),e.exports.createElement(E,{form:o,id:"password",type:"password"})),e.exports.createElement(Q,null,e.exports.createElement($,{form:o,cancel:()=>{s.onClose()},submit:async()=>{await o.call(),s.onClose()},labels:["Cancel","Create"]})))}),vs=D({root:{width:"100%"},container:{maxHeight:580},heading:{marginBottom:"20px"}}),de=r=>{const t=vs(),{columns:s,rows:o}=r,[a,l]=e.exports.useState(0),[i,d]=e.exports.useState(10),p=(y,P)=>{l(P)},k=y=>{d(+y.target.value),l(0)};return e.exports.createElement(qe,{className:t.root},e.exports.createElement(cr,{className:t.container},e.exports.createElement(pr,{stickyHeader:!0,"aria-label":"sticky table"},e.exports.createElement(ur,null,e.exports.createElement(Xe,null,s.map(y=>e.exports.createElement(Qe,{key:y.id,align:y.align,style:{minWidth:y.minWidth}},y.label)))),e.exports.createElement(mr,null,o.slice(a*i,a*i+i).map(y=>e.exports.createElement(Xe,{hover:!0,role:"checkbox",tabIndex:-1,key:y.id},s.map(P=>{const ge=y[P.id];return e.exports.createElement(Qe,{key:P.id,align:P.align},ge)})))))),e.exports.createElement(dr,{rowsPerPageOptions:[10,25,100],component:"div",count:o.length,rowsPerPage:i,page:a,onPageChange:p,onRowsPerPageChange:k}))},Ss=[{id:"fullName",label:"Full Name"},{id:"email",label:"Email"},{id:"id",label:"User ID"},{id:"isEnabled",label:"Enabled"},{id:"isVerified",label:"Verified"},{id:"menu",label:"",align:"right",minWidth:50}],Ws=c(()=>{const{adminstore:r}=m(),{users:t}=r;if(t.state!=="loaded")return null;const s=t.map(o=>({email:o.email,fullName:o.fullName,id:o.id,isEnabled:o.isEnabled?"True":"False",isVerified:o.isVerified?"True":"False",menu:e.exports.createElement(_e,{options:[{name:"Delete",onClick:()=>{o.onDelete()}},{name:"Edit",onClick:()=>{r.editUserDialog.setUserAndOpen(o)}},{name:o.isEnabled?"Disable":"Enable",onClick:()=>{o.onFlipDisable()}},{name:o.isVerified?"Unverify":"Verify",onClick:()=>{o.onFlipVerify()}},{name:"Reset Password",onClick:()=>{o.onResetPassword()}},{name:"Permissions",onClick:()=>{Wt.setUserAndOpen(o)}}]})}));return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(g,{variant:"h4"},"Users"),e.exports.createElement(de,{columns:Ss,rows:s}))}),Ds=c(r=>{const{adminstore:t}=m();return e.exports.createElement("div",null,e.exports.createElement(Ws,null),e.exports.createElement(Dt,{dialog:Wt}),e.exports.createElement(Cs,null),e.exports.createElement(Ps,null),e.exports.createElement(Ue,{onClick:t.createUserDialog.onOpen}))}),Rs=()=>e.exports.createElement("div",null,"admin home page"),Us=D(r=>({root:{color:"white","& .MuiOutlinedInput-notchedOutline":{color:"white",borderColor:"white"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"}},input:{"&::selection":{color:"white"}}})),_s=D({root:{color:"white","&.Mui-focused":{color:"white"}}}),Is=c(()=>{const{workspacesstore:r}=m(),t=Us(),s=_s(),o=r.workspaces,a=o.workspaces,l=o.state!=="loaded",i=r.selectedWorkspace,d=(p,k)=>{r.selectedWorkspace=k};return e.exports.createElement("div",null,e.exports.createElement(ze,{id:"combo-box-demo",loading:l,classes:t,value:i,onChange:d,options:a,getOptionLabel:p=>p.name,style:{width:300},renderInput:p=>e.exports.createElement(we,z(x({},p),{InputLabelProps:{classes:s},label:"Select Workspace...",variant:"outlined"}))}))}),Rt=240,Ut=D(r=>({toolbar:{paddingRight:24,marginTop:5},appBar:{zIndex:r.zIndex.drawer+1,transition:r.transitions.create(["width","margin"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Rt,width:`calc(100% - ${Rt}px)`,transition:r.transitions.create(["width","margin"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},search:{position:"relative",borderRadius:r.shape.borderRadius,backgroundColor:et(r.palette.common.white,.15),"&:hover":{backgroundColor:et(r.palette.common.white,.25)},marginLeft:0,width:"100%",[r.breakpoints.up("sm")]:{marginLeft:r.spacing(1),width:"auto"}},searchIcon:{padding:r.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:r.spacing(1,1,1,0),paddingLeft:`calc(1em + ${r.spacing(4)}px)`,transition:r.transitions.create("width"),width:"100%",[r.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}},accountIcon:{position:"absolute",right:"0px"}})),Ns=c(r=>{const{uistore:t,authstore:s}=m(),o=Ut(),[a,l]=e.exports.useState(null),i=Boolean(a),d=t.sideBarOpen,p=P=>{l(P.currentTarget)},k=()=>{l(null)},y=async()=>{await s.logout(),l(null)};return e.exports.createElement(tt,{position:"absolute",className:Y(o.appBar,d&&o.appBarShift)},e.exports.createElement(rt,{className:o.toolbar},e.exports.createElement(R,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:t.toggleSidebar,className:Y(o.menuButton,d&&o.menuButtonHidden)},e.exports.createElement(st,null)),e.exports.createElement(Is,null),e.exports.createElement("div",{className:o.accountIcon},e.exports.createElement(R,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:p,color:"inherit"},e.exports.createElement(ot,null)),e.exports.createElement(pe,{id:"menu-appbar",anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:k},e.exports.createElement(G,{button:!0,component:_,to:"/edit-profile"},"My Profile"),e.exports.createElement(G,{onClick:y},"Sign Out")))))}),Fs=c(r=>{const{uistore:t,authstore:s}=m(),o=Ut(),[a,l]=e.exports.useState(null),i=Boolean(a),d=t.sideBarOpen,p=P=>{l(P.currentTarget)},k=()=>{l(null)},y=async()=>{await s.logout(),l(null)};return e.exports.createElement(tt,{position:"absolute",className:Y(o.appBar,d&&o.appBarShift)},e.exports.createElement(rt,{className:o.toolbar},e.exports.createElement(R,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:t.toggleSidebar,className:Y(o.menuButton,d&&o.menuButtonHidden)},e.exports.createElement(st,null)),e.exports.createElement("div",{className:o.accountIcon},e.exports.createElement(R,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:p,color:"inherit"},e.exports.createElement(ot,null)),e.exports.createElement(pe,{id:"menu-appbar",anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:k},e.exports.createElement(G,{button:!0,component:_,to:"/edit-profile"},"My Profile"),e.exports.createElement(G,{onClick:y},"Sign Out")))))}),Ts=240,_t=D(r=>({toolbarIcon:x({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},r.mixins.toolbar),drawerPaper:{position:"relative",whiteSpace:"nowrap",width:Ts,transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),width:r.spacing(7),[r.breakpoints.up("sm")]:{width:r.spacing(9)}},paper:{padding:r.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"}})),Z=({links:r})=>{const t=s=>window.location.pathname==s;return e.exports.createElement(e.exports.Fragment,null,r.map(s=>e.exports.createElement(ue,{key:s.text,button:!0,component:_,to:s.url,selected:t(s.url)},e.exports.createElement(hr,null,s.icon),e.exports.createElement(Ce,{primary:s.text}))))},Os=c(r=>{const t=_t(),{uistore:s,workspacesstore:o}=m(),a=o.selectedWorkspace;if(!a)return null;const l=a==null?void 0:a.link,i=s.sideBarOpen,d=[{icon:e.exports.createElement(xr,null),url:l,text:"Deployments"},{icon:e.exports.createElement(gr,null),url:l+"/p",text:"Projects"},{icon:e.exports.createElement(Er,null),url:l+"/wiki",text:"Wiki"}],p=[{icon:e.exports.createElement(wr,null),url:"/w/new",text:"New"},{icon:e.exports.createElement(kr,null),url:`${l}/edit`,text:"Settings"},{icon:e.exports.createElement(yr,null),url:`${l}/metrics`,text:"Metrics"}],k=[{icon:e.exports.createElement(Pe,null),url:`${l}/admin/users`,text:"Workspace Users"}],y=[{icon:e.exports.createElement(Pe,null),url:"/admin/users",text:"Users"}];return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(at,{variant:"permanent",classes:{paper:Y(t.drawerPaper,!i&&t.drawerPaperClose)},open:s.sideBarOpen},e.exports.createElement("div",{className:t.toolbarIcon},e.exports.createElement(R,{onClick:s.toggleSidebar},e.exports.createElement(nt,null))),e.exports.createElement(ee,null),e.exports.createElement(K,null,e.exports.createElement(Z,{links:d})),e.exports.createElement(ee,null),e.exports.createElement(K,{subheader:e.exports.createElement(Be,{if:i},e.exports.createElement(be,null,"Workspace"))},e.exports.createElement(Z,{links:p}),e.exports.createElement(je,{roles:[U.WorkspaceAdmin,U.SuperAdmin],wid:a.id},e.exports.createElement(Z,{links:k}))),e.exports.createElement(ee,null),e.exports.createElement(je,{roles:[U.SuperAdmin]},e.exports.createElement(K,{subheader:e.exports.createElement(Be,{if:i},e.exports.createElement(be,null,"Admin"))},e.exports.createElement(Z,{links:y})))))}),As=c(r=>{const{uistore:t,workspacesstore:s}=m(),o=_t(),a=t.sideBarOpen,l=[{icon:e.exports.createElement(fr,null),url:"/",text:"Deployments"}],i=[{icon:e.exports.createElement(Pe,null),url:"/admin/users",text:"Users"}];return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(at,{variant:"permanent",classes:{paper:Y(o.drawerPaper,!a&&o.drawerPaperClose)},open:t.sideBarOpen},e.exports.createElement("div",{className:o.toolbarIcon},e.exports.createElement(R,{onClick:t.toggleSidebar},e.exports.createElement(nt,null))),e.exports.createElement(ee,null),e.exports.createElement(K,null,e.exports.createElement(Z,{links:l})),e.exports.createElement(ee,null),e.exports.createElement(je,{roles:[U.SuperAdmin]},e.exports.createElement(K,{subheader:e.exports.createElement(Be,{if:a},e.exports.createElement(be,null,"Admin"))},e.exports.createElement(Z,{links:i})))))}),It=()=>e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(Ns,null),e.exports.createElement(Os,null)),Ms=()=>e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(Fs,null),e.exports.createElement(As,null)),$s=D(r=>({paper:{position:"absolute",transform:"translateY(-50%)",top:"50%",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",width:"500px"}})),Nt=r=>{const t=$s();return e.exports.createElement(qe,{className:t.paper},r.children)},B=r=>{const{children:t}=r;return e.exports.createElement(te,{component:"main",maxWidth:"xs"},e.exports.createElement(lt,null),e.exports.createElement(Nt,null,t))},he=D(r=>({root:{display:"flex"},content:{overflow:"auto",marginTop:"69px",boxSizing:"border-box",width:"100%",height:"calc(100vh - 64px)"},container:{paddingTop:r.spacing(4),paddingBottom:r.spacing(4)},fixedHeight:{height:240}})),Ls=r=>{const t=he(),{children:s}=r;return e.exports.createElement("div",{className:t.root},e.exports.createElement(It,null),e.exports.createElement("main",{className:t.content},e.exports.createElement(te,{maxWidth:!1,className:t.container},s)),e.exports.createElement(Ie,null))},Ft=r=>{const{children:t}=r,s=he();return e.exports.createElement("div",{className:s.root},e.exports.createElement(It,null),e.exports.createElement("main",{className:s.content},t),e.exports.createElement(Ie,null))},j=r=>{const{children:t}=r,s=he();return e.exports.createElement(Ft,null,e.exports.createElement(te,{maxWidth:!1,className:s.container},t))},Tt=r=>{const t=he(),{children:s}=r;return e.exports.createElement("div",{className:t.root},e.exports.createElement(Ms,null),e.exports.createElement("main",{className:t.content},e.exports.createElement(te,{maxWidth:!1,className:t.container},s)),e.exports.createElement(Ie,null))},Ot="/admin/",Bs=()=>e.exports.createElement(Tt,null,e.exports.createElement(re,null,e.exports.createElement(O,{path:`${Ot}users`,component:Ds}),e.exports.createElement(O,{path:`${Ot}`,component:Rs})));class js extends b{constructor(){super({})}}class Gs extends b{constructor(t){super({data:{email:""},validator:W.AddWorkspaceUserDto,submit:new u({path:`${t.api}/users`,method:"PUT"})})}}class Vs extends v{constructor(t){super({});n(this,"users");n(this,"permissionsDialog");n(this,"inviteUserDialog");n(this,"inviteUserForm");this.workspace=t,this.inviteUserDialog=new se,this.inviteUserForm=new Gs(t),this.users=new eo(this.workspace,this),this.dependents=[this.users]}}const Ks=()=>null,ae=r=>br.createElement(Cr,x({data:[{domain:{x:[0,100],y:[0,1]},value:270,type:"indicator",mode:"gauge+number"}],layout:{paper_bgcolor:"transparent",autosize:!0,xaxis:{ticksuffix:"%"}},useResizeHandler:!0,style:{width:"100%",height:"100%"}},r));let Te=[];const Hs=Pr(c(r=>{const{snackbarstore:t}=m();return console.log(t.alerts),t.alerts.forEach(s=>{const l=s,{message:o}=l,a=ce(l,["message"]);Te.includes(s.key)||(r.enqueueSnackbar(o,a),Te=[...Te,s.key],t.remove(s))}),null})),zs=r=>e.exports.createElement(vr,{anchorOrigin:{vertical:"bottom",horizontal:"left"}},e.exports.createElement(Hs,null)),Ys=[{id:"fullName",label:"Full Name"},{id:"email",label:"Email"},{id:"menu",label:"",align:"right",minWidth:50}],Js=c(r=>{const{workspaceAdmin:t}=r,{users:s}=t;if(s.state!=="loaded")return null;const o=s.map(a=>({email:a.email,fullName:a.fullName,menu:e.exports.createElement(_e,{options:[{name:"Remove",onClick:()=>{a.onRemove()}},{name:"Permissions",onClick:()=>{St.setUserAndOpen(a)}}]})}));return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(g,{variant:"h4"},"Users"),e.exports.createElement(de,{columns:Ys,rows:o}))}),Zs=c(r=>{const{workspacesstore:t}=m(),s=t.selectedWorkspace;if(!s)return null;const o=s.workspaceAdmin;return e.exports.createElement("div",null,e.exports.createElement(Js,{workspaceAdmin:o}),e.exports.createElement(Dt,{dialog:St}),e.exports.createElement(bs,{form:o.inviteUserForm,dialog:o.inviteUserDialog}),e.exports.createElement(Ue,{onClick:o.inviteUserDialog.onOpen}))}),At=()=>Sr.parse(Wr().search,{ignoreQueryPrefix:!0}),Mt=(r,t)=>{const s=o=>{o.onLoad.subscribe(()=>{r.data=o.data})};if(Array.isArray(t))for(const o of t)s(o);else s(t)},Oe=(r,t)=>{t.onLoad.subscribe(()=>{r.add(t.data)})},Ae=(r,t)=>{t.onLoad.subscribe(()=>{r.remove()})};class $t extends v{get fullName(){return this.data.fullName}get id(){return this.data.id}get email(){return this.data.email}}class Lt extends $t{constructor(){super(...arguments);n(this,"permissions")}}class qs extends $t{constructor(){super();n(this,"permissions");n(this,"updateUserForm");this.repos={main:new u({path:this.api})},this.permissions=new so(this),this.dependents=[this.permissions],this.updateUserForm=new ss(this)}get api(){return"/api/user"}}class Xs extends H{constructor(){super({collections:Qs});n(this,"createUserForm");this.createUserForm=new wt,this.repos={main:new u({path:this.api})},Oe(this,this.createUserForm.submit)}get api(){return"/api/users/"}get users(){return this.collection}}class Qs extends Lt{constructor({parent:t,data:s,parentCollection:o}){super({parent:t,data:s,parentCollection:o});n(this,"updateUserForm");n(this,"deleteUserForm");n(this,"users");n(this,"disable");n(this,"enable");n(this,"verify");n(this,"unverify");n(this,"delete");n(this,"resetPassword");n(this,"onFlipDisable",async()=>{this.isEnabled?this.disable.call():this.enable.call()});n(this,"onFlipVerify",async()=>{this.isVerified?this.unverify.call():this.verify.call()});n(this,"onDelete",async()=>{await this.delete.call()});n(this,"onResetPassword",async()=>{await this.resetPassword.call()});this.users=t,this.updateUserForm=new ns(this),this.permissions=new no(this),this.disable=new u({path:this.api,method:"PUT",body:{isEnabled:!1}}),this.enable=new u({path:this.api,method:"PUT",body:{isEnabled:!0}}),this.verify=new u({path:this.api,method:"PUT",body:{isVerified:!0}}),this.unverify=new u({path:this.api,method:"PUT",body:{isVerified:!1}}),this.resetPassword=new u({path:"/api/auth/forgot-password",method:"PUT",body:{email:this.email}}),this.delete=new u({path:this.api,method:"DELETE"}),Mt(this,[this.disable,this.enable,this.verify,this.unverify,this.updateUserForm.submit]),Ae(this,this.delete),this.dependents=[this.permissions]}get email(){return this.data.email}get fullName(){return this.data.fullName}get isEnabled(){return this.data.isEnabled}get isVerified(){return this.data.isVerified}get id(){return this.data.id}get api(){return`/api/users/${this.data.id}`}}class eo extends H{constructor(t,s){super({collections:{main:{key:"users",model:to}}});n(this,"forms",{invite:new js});this.workspace=t,this.workspaceAdmin=s,this.repos={main:new u({path:this.api})}}get api(){return`${this.workspace.api}/users`}}class to extends Lt{constructor({data:t,parent:s}){super({data:t});n(this,"workspaceUsers");n(this,"workspace");this.workspaceUsers=s,this.workspace=this.workspaceUsers.workspace,this.permissions=new ao(this,this.workspace),this.repos={remove:new u({path:this.api})},this.dependents=[this.permissions]}get id(){return this.data.id}get api(){return`${this.workspaceUsers.api}/${this.id}`}}class T{constructor(t){n(this,"has",t=>this.array.includes(t));this._array=t}get array(){return this._array||[]}}class ro extends v{}class so extends ro{constructor(t){super({});n(this,"workspacesPermissions",{});n(this,"getWorkspacePermission",t=>this.workspacesPermissions[t]);n(this,"postLoad",async()=>{for(const t in this.data.workspaces){const s=this.data.workspaces[t];this.workspacesPermissions[t]=new oo(t,s)}});this.user=t,this.repos={main:new u({path:this.api})}}get api(){return"/api/user/permissions"}get permissions(){return new T(this.data.permissions)}get roles(){return new T(this.data.roles)}}class oo{constructor(t,s){this.id=t,this.data=s}get permissions(){return new T(this.data.permissions)}get roles(){return new T(this.data.roles)}}class Bt extends v{constructor(){super();n(this,"permissionsForm")}get permissions(){return new T(this.data.permissions)}get roles(){return new T(this.data.roles)}}class ao extends Bt{constructor(t,s){super();n(this,"permissionsForm");n(this,"permissionsDialog");this.user=t,this.workspace=s,this.forms={main:this.permissionsForm},this.repos={main:new u({path:this.api})},this.permissionsForm=new os(this,s)}get api(){return`${this.workspace.api}/users/${this.user.id}/permissions`}get permissions(){return new T(this.data.permissions)}get roles(){return new T(this.data.roles)}}class no extends Bt{constructor(t){super();n(this,"permissionsForm");this.user=t,this.repos={main:new u({path:this.api})},this.forms={main:this.permissionsForm},this.permissionsForm=new as(this)}get api(){return`${this.user.api}/permissions`}get permissions(){return new T(this.data.permissions)}get roles(){return new T(this.data.roles)}}const jt=[{id:"checkbox",label:""},{id:"permission",label:"Permission"}],lo=c(r=>{const{form:t,permissions:s}=r,o=[];for(const a of s)o.push({checkbox:e.exports.createElement(ke,{onClick:t.onSelectPermission(a),checked:t.hasPermission(a)}),permission:a});return e.exports.createElement("div",null,e.exports.createElement(C,null,"Permission Form"),e.exports.createElement(de,{columns:jt,rows:o}))}),io=c(r=>{const{form:t,roles:s}=r,o=[];for(const a of s)o.push({checkbox:e.exports.createElement(ke,{onClick:t.onSelectRole(a),checked:t.hasRole(a)}),permission:a});return e.exports.createElement("div",null,e.exports.createElement(C,null,"Role Form"),e.exports.createElement(de,{columns:jt,rows:o}))}),co=c(r=>{const{authstore:t,routerstore:s}=m(),a=t.user.updateUserForm;return e.exports.createElement("div",null,e.exports.createElement(g,{variant:"h4"},"Edit Profile"),e.exports.createElement(g,{variant:"h6",style:{marginTop:"20px"}},"Full Name"),e.exports.createElement(E,{form:a,id:"fullName"}),e.exports.createElement($,{form:a,labels:["Cancel","Update"]}))}),po=()=>e.exports.createElement(j,null,e.exports.createElement(co,null)),uo=c(r=>{const{authstore:t}=m();return e.exports.useEffect(()=>{t.logout()},[]),null}),mo=V(A)(c(r=>{const t=r[A],s=At(),{token:o}=s,a=t.changePasswordForm;return e.exports.useEffect(()=>{a.data.token=o},[]),a.submit.state=="loading"?e.exports.createElement(B,null,e.exports.createElement(it,null)):a.submit.state=="loaded"?e.exports.createElement(B,null,e.exports.createElement(g,null,"Success"),e.exports.createElement(S,{fullWidth:!0,variant:"contained",color:"primary",component:_,to:"login"},"Click here to login")):e.exports.createElement(B,null,e.exports.createElement(g,null,"Change Password"),e.exports.createElement(E,{form:a,id:"password",type:"password",label:"Password",autoComplete:"current-password"}),e.exports.createElement(E,{form:a,id:"confirmPassword",type:"password",label:"Confirm Password",autoComplete:"current-password"}),e.exports.createElement(S,{fullWidth:!0,variant:"contained",color:"primary",disabled:!a.isValid,onClick:()=>{t.changePassword()}},"Change Password"))})),ho=V(A)(c(r=>{const t=r[A],s=t.forgotPasswordForm;return e.exports.createElement(te,{component:"main",maxWidth:"xs"},e.exports.createElement(lt,null),e.exports.createElement(Nt,null,e.exports.createElement(g,{component:"h1",variant:"h5"},"Forgot Password"),e.exports.createElement(E,{form:s,id:"email",label:"Email Address"}),e.exports.createElement(S,{fullWidth:!0,variant:"contained",color:"primary",onClick:t.forgotPassword,disabled:!s.isValid},"Send Reset Link")))})),xo=c(r=>{const{authstore:t}=m(),s=t.signinForm;return e.exports.createElement(B,null,e.exports.createElement(ct,null,e.exports.createElement(pt,null)),e.exports.createElement(g,{component:"h1",variant:"h5"},"Log in"),e.exports.createElement(E,{form:s,id:"email",label:"Email Address",autoFocus:!0}),e.exports.createElement(E,{form:s,id:"password",type:"password",label:"Password",autoComplete:"current-password"}),e.exports.createElement(S,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",onClick:t.login,disabled:!s.isValid},"Log In"),e.exports.createElement(w,{container:!0},e.exports.createElement(w,{item:!0,xs:!0},e.exports.createElement(_,{to:"/forgotPassword"},"Forgot password?")),e.exports.createElement(w,{item:!0},e.exports.createElement(_,{to:"/signup"},"Don't have an account? Sign Up"))))}),go=V(A)(c(r=>{const t=r[A],s=t.signupForm;return e.exports.createElement(B,null,e.exports.createElement(ct,null,e.exports.createElement(pt,null)),e.exports.createElement(g,{component:"h1",variant:"h5"},"Sign Up"),e.exports.createElement(E,{form:s,id:"fullName",label:"Full Name",autoFocus:!0}),e.exports.createElement(E,{form:s,id:"email",label:"Email Address"}),e.exports.createElement(E,{form:s,id:"password",type:"password",label:"Password",autoComplete:"current-password"}),e.exports.createElement(S,{fullWidth:!0,variant:"contained",color:"primary",onClick:t.signup,disabled:!s.isValid},"Sign Up"),e.exports.createElement(w,{container:!0},e.exports.createElement(w,{item:!0,xs:!0}),e.exports.createElement(w,{item:!0},e.exports.createElement(_,{to:"/login"},"Already have an account? Log In!"))))})),Eo=V(A)(c(r=>{const t=r[A],s=At(),{token:o}=s,a=t.verifyForm;return e.exports.useEffect(()=>{a.data.token=o,t.verify()},[]),a.submit.state=="loading"?e.exports.createElement(B,null,e.exports.createElement(it,null)):a.submit.state=="loaded"?e.exports.createElement(B,null,e.exports.createElement(g,null,"Account Succesfully Verified!"),e.exports.createElement(S,{fullWidth:!0,variant:"contained",color:"primary",component:_,to:"login"},"Click here to login")):e.exports.createElement(B,null,e.exports.createElement(g,{color:"error"},a.submit.data.message),e.exports.createElement(S,{fullWidth:!0,variant:"contained",color:"primary",component:_,to:"login"},"Go back to Log In"))}));var wo=Object.defineProperty,ko=Object.getOwnPropertyDescriptor,yo=(r,t,s,o)=>{for(var a=o>1?void 0:o?ko(t,s):t,l=r.length-1,i;l>=0;l--)(i=r[l])&&(a=(o?i(t,s,a):i(a))||a);return o&&a&&wo(t,s,a),a};class Gt{constructor(t){n(this,"state");n(this,"signupForm");n(this,"signinForm");n(this,"verifyForm");n(this,"forgotPasswordForm");n(this,"changePasswordForm");n(this,"user");n(this,"logoutRepo");n(this,"loadUser",async()=>{this.state="loading",await this.user.load(),this.state=this.user.state=="loaded"?"loggedin":"unauthed"});n(this,"login",async()=>{await this.signinForm.call()});n(this,"logout",async()=>{await this.logoutRepo.call(),this.logoutRepo.state=="loaded"&&this.rootStore.routerStore.push("/")});n(this,"signup",async()=>{await this.signupForm.call()});n(this,"forgotPassword",async()=>{await this.forgotPasswordForm.call()});n(this,"verify",async()=>{await this.verifyForm.call()});n(this,"changePassword",async()=>{await this.changePasswordForm.call()});this.rootStore=t,this.state="unauthed",this.signupForm=new wt,this.signinForm=new Qr,this.verifyForm=new es,this.forgotPasswordForm=new ts,this.changePasswordForm=new rs,this.logoutRepo=new u({path:"/api/auth/logout",method:"POST"}),this.user=new qs,this.loadUser(),L(this)}}yo([F],Gt.prototype,"state",2);class fo extends ut.exports.RouterStore{constructor(t,s){super();this.rootStore=t,s&&(this.history=ut.exports.syncHistoryWithStore(s,this)),L(this)}get params(){const t=[/\/w\/(?<wid>[a-zA-Z0-9]{24})\/p\/(?<pid>[a-zA-Z0-9]{24})/,/\/w\/(?<wid>[a-zA-Z0-9]{24})\/wiki\/(?<sectionId>[a-zA-Z0-9]{24})/,/\/w\/(?<wid>[a-zA-Z0-9]{24})\/wiki\/(?<sectionId>[a-zA-Z0-9]{24})\/pages\/(?<pageId>[a-zA-Z0-9]{24})/,/\/w\/(?<wid>[a-zA-Z0-9]{24})/,/\/w\/(?<wid>[a-zA-Z0-9]{24})\/d\/(?<did>[a-zA-Z0-9]{24})/];let s={};for(const o of t){const a=this.location.pathname.match(o);s=x(x({},(a==null?void 0:a.groups)||{}),s)}return s}get workspaceUrl(){var s;return`/w/${(s=this.rootStore.workspacesStore.selectedWorkspace)==null?void 0:s.id}`}}class bo extends b{constructor(t){super({});this.workspace=t}}class Co extends b{constructor(t){super({data:t.data,submit:new u({path:t.api,method:"PUT"})});this.workspace=t}}class Po extends b{constructor(){super({validator:W.CreateWorkspaceDto,data:{name:"",properties:{resources:{cpuCount:void 0,memoryCount:void 0,storageCount:void 0}}},keys:[["cpuCount",{key:"properties.resources.cpuCount",cast:Number}],["memoryCount",{key:"properties.resources.memoryCount",cast:Number}],["storageCount",{key:"properties.resources.storageCount",cast:Number}]],submit:new u({path:"/api/workspaces",method:"POST"})})}}class vo extends v{constructor(t){super({data:""});this.deployment=t,this.repos=mt(new u({path:this.api}))}get logs(){return JSON.stringify(this.data)}get api(){return`${this.deployment.api}/logs`}}class So extends v{constructor(t){super({});this.deployment=t,this.repos={main:mt(new u({path:this.api}))}}get api(){return`${this.deployment.api}/metrics`}get memory(){return this.data.memory}get cpu(){return this.data.cpu}get cpuChart(){return{data:[{value:this.cpu,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"CPU Usage"},type:"indicator",mode:"gauge+number"}]}}get memoryChart(){return{data:[{value:this.memory,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"Memory Usage"},type:"indicator",mode:"gauge+number"}]}}}class Wo extends b{constructor(t){super({data:{properties:{image:{type:"VSCODE"}}},keys:[["cpuCount",{key:"properties.resources.cpuCount",cast:Number}],["memoryCount",{key:"properties.resources.memoryCount",cast:Number}],["storageCount",{key:"properties.resources.storageCount",cast:Number}],["isFavorite","properties.isFavorite"],["sudoPassword","properties.sudoPassword"],["type","properties.image.type"],["version","properties.image.version"]],validator:W.CreateDeploymentDto,submit:new u({path:t.api,method:"POST"})});this.deployments=t}}class Do extends b{constructor(t){super({data:{name:t.data.name,properties:{isFavorite:!1,image:t.data.properties.image,resources:{cpuCount:t.data.properties.resources.cpuCount,memoryCount:t.data.properties.resources.memoryCount}}},keys:[["cpuCount",{key:"properties.resources.cpuCount",cast:Number}],["memoryCount",{key:"properties.resources.memoryCount",cast:Number}],["storageCount",{key:"properties.resources.storageCount",cast:Number}],["isFavorite","properties.isFavorite"],["sudoPassword","properties.sudoPassword"],["type","properties.image.type"],["version","properties.image.version"]],validator:W.UpdateDeploymentDto,submit:new u({path:t.api,method:"PUT"})});this.deployment=t}}class Ro extends H{constructor(t){super({collections:Uo});n(this,"createDeployment");n(this,"postLoad",async()=>{console.log("deployments loaded")});this.workspace=t,this.createDeployment=new Wo(this),this.repos={main:new u({path:this.api})},Oe(this,this.createDeployment.submit)}get deployments(){return this.collection.models||[]}get api(){return`${this.workspace.api}/deployments`}}class Uo extends v{constructor({data:t,parent:s,parentCollection:o}){super({data:t,parentCollection:o});n(this,"deployments");n(this,"logs");n(this,"metrics");n(this,"workspace");n(this,"delete");this.deployments=s,this.workspace=this.deployments.workspace,this.logs=new vo(this),this.metrics=new So(this),this.dependents=[this.logs,this.metrics],this.forms={edit:new Do(this)},this.delete=new u({path:this.api,method:"DELETE"}),this.repos={delete:this.delete},Ae(this,this.delete)}get name(){return this.data.name}get status(){return this.data.status}get id(){return this.data.id}get link(){return`${this.deployments.workspace.link}/d/${this.id}`}get api(){return`${this.deployments.api}/${this.id}`}get cpuCount(){return this.data.properties.resources.cpuCount}get memoryCount(){return this.data.properties.resources.memoryCount}get storageCount(){return this.data.properties.resources.storageCount}get proxyUrl(){return this.data.properties.proxyUrl}}class _o extends H{constructor(t){super({collections:Io});this.workspace=t,this.repos={main:new u({path:this.api}),create:new u({path:this.api,method:"POST"})}}get api(){return`${this.workspace.api}/deployments`}}class Io extends v{constructor(t,s){super({data:t});this.projects=s}}class No extends H{constructor(t){super({collections:Fo});n(this,"addSection");n(this,"onAddSection",()=>{this.addSection.call()});this.workspace=t,this.addSection=new u({path:this.api,method:"POST",body:{name:"New Section"},events:gt.WIKISECTIONS}),this.addSection.onLoad.subscribe(()=>{this.load()}),this.repos={main:new u({path:this.api}),addSection:this.addSection}}get link(){return`${this.workspace.link}/wiki`}get api(){return`${this.workspace.api}/sections`}}class Fo extends v{constructor({data:t,parent:s}){super({data:t});n(this,"sections");n(this,"wikiPages");n(this,"sectionForm");n(this,"delete");n(this,"onSubmitNameChange",()=>{});n(this,"onDelete",async()=>{await this.delete.call()});this.sections=s,this.sectionForm=new b({data:{name:t.name}}),this.delete=new u({path:this.api,method:"DELETE"}),this.wikiPages=new To(this),this.delete.onLoad.subscribe(()=>{this.sections.load()}),this.dependents=[this.wikiPages]}get id(){return this.data.id}get link(){return`${this.sections.link}/${this.id}`}get api(){return`${this.sections.api}/${this.id}`}}class To extends H{constructor(t){super({collections:Oo});n(this,"addPage");n(this,"onAddPage",()=>{this.addPage.call()});this.wikiSection=t,this.addPage=new u({path:this.api,method:"POST",body:{title:"New Page",body:"# New Page!"},events:gt.WIKIPAGES}),this.addPage.onLoad.subscribe(()=>{this.load()}),this.repos={main:new u({path:this.api})}}get link(){return`${this.wikiSection.link}/pages`}get api(){return`${this.wikiSection.api}/pages`}}class Oo extends v{constructor({data:t,parent:s}){super({data:t});n(this,"pages");n(this,"pageForm");n(this,"delete");n(this,"onSave",async()=>{await this.pageForm.call()});n(this,"onDelete",async()=>{await this.delete.call(),this.delete.state=="loaded"&&this.pages.load()});this.pages=s,this.pageForm=new b({data:{title:t.title,body:t.body},submit:new u({path:this.api,method:"PUT"})}),this.delete=new u({path:this.api,method:"DELETE"})}get id(){return this.data.id}get api(){return`${this.pages.api}/${this.id}`}get link(){return`${this.pages.link}/${this.id}`}}class Ao extends v{constructor(t){super({});n(this,"types");n(this,"versions",{});n(this,"postLoad",async()=>{this.types=[...new Set(this.data.map(t=>t.type))];for(const t of this.types)this.versions[t]=[];this.data.map(t=>{this.versions[t.type].push(t.version)})});this.workspace=t,this.repos={main:new u({path:this.api})},this.load()}getTypes(){return this.types.map(t=>({label:W.DeploymentLabelingUtil.generateImageTypeLabel(t),value:t}))}getVersions(t){return t!=null&&!this.versions[t]?[]:this.versions[t].map(s=>({label:W.DeploymentLabelingUtil.generateImageVersionLabel(s),value:s}))}get api(){return`${this.workspace.api}/deployments/images/`}}class Mo extends v{constructor(t){super({});this.workspace=t,this.repos={main:new u({path:this.api})}}get api(){return`${this.workspace.api}/metrics`}get memory(){return this.data.memory}get cpu(){return this.data.cpu}get storage(){return this.data.storage}get cpuChart(){return{data:[{value:this.cpu,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"CPU Usage"},type:"indicator",mode:"gauge+number"}]}}get memoryChart(){return{data:[{value:this.memory,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"Memory Usage"},type:"indicator",mode:"gauge+number"}]}}get storageChart(){return{data:[{value:this.storage,gauge:{axis:{range:[0,100]}},number:{suffix:"%"},title:{text:"Storage Usage"},type:"indicator",mode:"gauge+number"}]}}}class $o extends H{constructor(){super({collections:Lo});n(this,"createWorkspaceForm");n(this,"postLoad",async()=>{console.log("workspaces loaded")});this.createWorkspaceForm=new Po,Oe(this,this.createWorkspaceForm.submit),this.repos={main:new u({path:this.api}),create:new u({path:this.api,method:"POST"})}}get api(){return"/api/workspaces"}get workspaces(){return this.collection.models||[]}get selectedWorkspace(){return this.workspaces[0]}get workspaceUrl(){return`/w/${this.selectedWorkspace.id}`}}class Lo extends v{constructor(t){super(t);n(this,"wikiSections");n(this,"deploymentImages");n(this,"deployments");n(this,"projects");n(this,"metrics");n(this,"workspaceAdmin");n(this,"workspaces");n(this,"updateWorkspace");n(this,"createDeployment");n(this,"createProject");n(this,"delete");n(this,"onDelete",async()=>{await this.delete.call(),this.delete.state==="loaded"&&Le.routerStore.goBack()});this.workspaces=this.parent,this.repos={update:new u({path:this.api,method:"PUT"}),createDeployment:new u({path:`${this.api}/deployments`,method:"POST"})},this.delete=new u({path:this.api,method:"DELETE"}),this.updateWorkspace=new Co(this),this.createProject=new bo(this),this.forms={createDeployment:this.createDeployment,createProject:this.createProject,update:this.updateWorkspace},this.deployments=new Ro(this),this.projects=new _o(this),this.wikiSections=new No(this),this.deploymentImages=new Ao(this),this.metrics=new Mo(this),this.workspaceAdmin=new Vs(this),this.dependents=[this.deployments,this.deploymentImages,this.workspaceAdmin,this.metrics,this.wikiSections],Mt(this,this.updateWorkspace.submit),Ae(this,this.delete)}get id(){return this.data.id}get name(){return this.data.name}get users(){return this.data.users}get resources(){return this.data.properties.resources}get cpuCount(){return this.resources.cpuCount}get memoryCount(){return this.resources.memoryCount}get storageCount(){return this.resources.storageCount||0}get link(){return`/w/${this.id}`}get api(){return`/api/workspaces/${this.id}`}}var Bo=Object.defineProperty,jo=Object.getOwnPropertyDescriptor,Me=(r,t,s,o)=>{for(var a=o>1?void 0:o?jo(t,s):t,l=r.length-1,i;l>=0;l--)(i=r[l])&&(a=(o?i(t,s,a):i(a))||a);return o&&a&&Bo(t,s,a),a};class xe{constructor(t){n(this,"_selectedWorkspace");n(this,"wikiEdit");n(this,"workspaces");n(this,"count",0);n(this,"selectWorkspace",t=>{const s=this.workspaces.getBy("id",t)[0];s&&(this.selectedWorkspace=s)});var s;this.rootStore=t,this.workspaces=new $o,this.wikiEdit=!1,L(this),(s=t.authStore.user.repo)==null||s.onLoad.subscribe(o=>{this.workspaces.load()})}set selectedWorkspace(t){!t||(this.rootStore.routerStore.push(t.link),this._selectedWorkspace=this.selectedWorkspace)}get selectedWorkspace(){const{wid:t}=this.rootStore.routerStore.params;let s;return t?s=this.workspaces.getBy("id",t)[0]:this._selectedWorkspace!==void 0?s=this._selectedWorkspace:s=this.workspaces.workspaces[0],this._selectedWorkspace=s,s}get selectedDeployment(){const{did:t}=this.rootStore.routerStore.params;if(this.selectedWorkspace)return this.selectedWorkspace.deployments.getBy("id",t)[0]}get selectedWikiSection(){const{sectionId:t}=this.rootStore.routerStore.params;if(this.selectedWorkspace)return this.selectedWorkspace.wikiSections.getBy("id",t)[0]}get selectedWikiPage(){const{pageId:t}=this.rootStore.routerStore.params;if(this.selectedWikiSection)return this.selectedWikiSection.wikiPages.getBy("id",t)[0]}}Me([F],xe.prototype,"_selectedWorkspace",2);Me([F],xe.prototype,"wikiEdit",2);Me([F],xe.prototype,"count",2);var Go=Object.defineProperty,Vo=Object.getOwnPropertyDescriptor,Ko=(r,t,s,o)=>{for(var a=o>1?void 0:o?Vo(t,s):t,l=r.length-1,i;l>=0;l--)(i=r[l])&&(a=(o?i(t,s,a):i(a))||a);return o&&a&&Go(t,s,a),a};class Vt{constructor(){n(this,"alerts",[]);this.initEvents(),L(this)}push(t){this.alerts.push(x({key:new Date().getTime()+Math.random(),autoHideDuration:6e3},t))}get(){return this.alerts}remove(t){return()=>{this.alerts=this.alerts.filter(s=>{s.key!=t.key})}}initEvents(){Object.values(M).forEach(t=>{Dr.on(t.type,s=>{this.push({message:t.data.message,variant:t.data.variant})})})}}Ko([F],Vt.prototype,"alerts",2);var Ho=Object.defineProperty,zo=Object.getOwnPropertyDescriptor,Kt=(r,t,s,o)=>{for(var a=o>1?void 0:o?zo(t,s):t,l=r.length-1,i;l>=0;l--)(i=r[l])&&(a=(o?i(t,s,a):i(a))||a);return o&&a&&Ho(t,s,a),a};class $e extends v{constructor(t){super({});n(this,"confirmDelete");n(this,"count",0);n(this,"sideBarOpen",!1);n(this,"setDeleteTarget",(t,s)=>{this.confirmDelete.setTarget(t,s),this.confirmDelete.dialog.onOpen()});n(this,"toggleSidebar",()=>{this.sideBarOpen=!this.sideBarOpen});this.rootStore=t,this.confirmDelete=new Pt,this.forms={confirmDelete:this.confirmDelete},L(this)}}Kt([F],$e.prototype,"count",2);Kt([F],$e.prototype,"sideBarOpen",2);class Yo extends v{constructor(t){super();n(this,"users");n(this,"editUserDialog");n(this,"createUserDialog");var s;this.rootStore=t,this.users=new Xs,this.editUserDialog=new fs,this.createUserDialog=new se,(s=t.authStore.user.repo)==null||s.onLoad.subscribe(o=>{console.log("authstore onload admin",o),this.load()}),this.dependents=[this.users]}}class Jo{constructor(t){n(this,"routerStore");n(this,"authStore");n(this,"workspacesStore");n(this,"snackbarStore");n(this,"uiStore");n(this,"adminStore");this.routerStore=new fo(this,t),this.authStore=new Gt(this),this.workspacesStore=new xe(this),this.snackbarStore=new Vt,this.uiStore=new $e(this),this.adminStore=new Yo(this)}get stores(){return{[Se]:this.routerStore,[A]:this.authStore,[We]:this.workspacesStore,[Hr]:this.snackbarStore,[zr]:this.uiStore,[Yr]:this.adminStore}}}const Ht=Rr(),Le=new Jo(Ht),Zo=e.exports.createContext(Le.stores),m=()=>e.exports.useContext(Zo),qo=c(r=>{const{authstore:t}=m();if(t.state=="unauthed")return e.exports.createElement(J,{to:"/login"});switch(t.state){case"loggedin":return r.children;default:return"loading..."}}),I=c(r=>{const{authstore:t}=m();if(t.state=="unauthed")return e.exports.createElement(J,{to:"/login"});switch(t.state){case"loggedin":return e.exports.createElement(O,x({},r));default:return null}}),ne=c(r=>{const{authstore:t}=m();switch(t.state){case"loggedin":return e.exports.createElement(J,{to:"/"});case"unauthed":return e.exports.createElement(O,x({},r));default:return null}});c(r=>{const{authstore:t}=m();switch(t.user.state){case"loaded":return e.exports.createElement(I,x({},r));default:return null}});const Be=r=>r.if?r.children:null,zt=r=>{const{array:t,permissions:s}=r;let o=!1;for(const a of t)if(s.has(a)){o=!0;break}return o?r.children:null},je=c(r=>{var l;const{authstore:t}=m(),{roles:s,wid:o}=r;let a=t.user.permissions.roles;return o&&(a=((l=t.user.permissions.getWorkspacePermission(o))==null?void 0:l.roles)||a),e.exports.createElement(zt,{array:s,permissions:a},r.children)});c(r=>{var l;const{authstore:t}=m(),{permissions:s,wid:o}=r;let a=t.user.permissions.permissions;return o&&(a=((l=t.user.permissions.getWorkspacePermission(o))==null?void 0:l.permissions)||a),e.exports.createElement(zt,{array:s,permissions:a},r.children)});const N=c(r=>{var o;const{workspacesstore:t}=m();return t.workspaces.state=="loaded"?((o=t.selectedWorkspace)==null?void 0:o.id)?e.exports.createElement(I,x({},r)):e.exports.createElement(J,{to:"/w/new"}):null});c(r=>{const{workspacesstore:t}=m(),s=t.selectedWorkspace;if(s==null)return null;switch(s.deployments.state){case"reloading":return e.exports.createElement(I,x({},r));case"loaded":return e.exports.createElement(I,x({},r));default:return null}});c(r=>{const{workspacesstore:t}=m(),s=t.selectedWorkspace;if(s==null)return null;switch(s.projects.state){case"reloading":return e.exports.createElement(I,x({},r));case"loaded":return e.exports.createElement(I,x({},r));default:return null}});V(We)(c(r=>{const{workspacesstore:t}=m(),s=t.selectedWorkspace;if(s==null)return null;switch(s.wikiSections.state){case"reloading":return e.exports.createElement(I,x({},r));case"loaded":return e.exports.createElement(I,x({},r));default:return null}}));const Yt=c(r=>{const{form:t,workspace:s}=r,o=s.deploymentImages,a=o.getTypes(),l=t.get("type")||o.types[0],i=t.get("version"),d=o.getVersions(l),p=P=>ge=>{t.onChange(P)(ge.target.value)},k=P=>(t.onChange("version")(void 0),p("type")(P)),y=P=>p("version")(P);return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(De,z(x({},r),{id:"type",label:"Type",defaultValue:a[0],options:a,onChange:k,value:l})),e.exports.createElement(De,z(x({},r),{id:"version",label:"Version",defaultValue:d[0],options:d,onChange:y,value:i})))}),Xo=c(r=>{const{workspacesstore:t}=m(),s=t.selectedWorkspace;if(!s)return null;const o=s.deployments.createDeployment;return e.exports.createElement(j,null,e.exports.createElement(g,{variant:"h4"},"Create Deployment"),e.exports.createElement(Qo,{form:o}))}),Qo=c(r=>{const{form:t}=r,s=t.deployments.workspace;return e.exports.createElement(dt,{form:t},e.exports.createElement(C,null,"Deployment Name"),e.exports.createElement(E,{form:t,id:"name",label:"deployment name",autoComplete:"off"}),e.exports.createElement(C,null,"Sudo Password"),e.exports.createElement(E,{form:t,id:"sudoPassword",type:"password",label:"Sudo Password",autoComplete:"current-password"}),e.exports.createElement(C,null,"Container Image"),e.exports.createElement(Yt,{form:t,workspace:s}),e.exports.createElement(C,null,"Resources"),e.exports.createElement(g,{variant:"body1"},"Specify the maximum amount of resources the deployment can use."),e.exports.createElement(cs,{form:t}),e.exports.createElement($,{form:t}))}),ea="_iframeWrapper_1z0e6_1",ta="_iframe_1z0e6_1";var ra={iframeWrapper:ea,iframe:ta};const sa=V(We)(c(r=>{const{workspacesstore:t}=m(),[s,o]=e.exports.useState("loading"),a=t.selectedDeployment;return a?(a.id,e.exports.createElement(Ls,null,e.exports.createElement("iframe",{id:ra.iframe,src:`https://${a.proxyUrl}`,onLoad:()=>{o("loaded")}}))):null})),oa=r=>{const{workspacesstore:t,uistore:s}=m(),o=t.selectedDeployment,a=o==null?void 0:o.forms.edit;return e.exports.createElement(j,null,e.exports.createElement(aa,{form:a}))},aa=c(r=>{const{routerstore:t}=m(),{form:s}=r;return console.log(JSON.stringify(s==null?void 0:s.errors),s==null?void 0:s.isValid),s?e.exports.createElement(dt,{form:s},e.exports.createElement(C,null,"Deployment Name"),e.exports.createElement(E,{form:s,id:"name",label:"name",autoComplete:"off"}),e.exports.createElement(C,null,"Resources"),e.exports.createElement(g,{variant:"body1"},"Specify the maximum amount of resources the deployment can use:"),e.exports.createElement(C,null,"Container Image"),e.exports.createElement(Yt,{form:s,workspace:s.deployment.workspace}),e.exports.createElement(me,{form:s}),e.exports.createElement($,{form:s,cancel:()=>{t.goBack()},submit:async()=>{console.log("SUBMIT",s,s.payload),await s.call()},labels:["Cancel","Edit"]})):null}),na={FAILED:e.exports.createElement(f,{style:{backgroundColor:"red"},label:"Error"}),SUCCESS:e.exports.createElement(f,{style:{backgroundColor:"red"},label:"Error"}),STARTING:e.exports.createElement(f,{style:{backgroundColor:"red"},label:"Error"}),PENDING:e.exports.createElement(f,{color:"secondary",label:"PENDING"}),CREATING:e.exports.createElement(f,{color:"secondary",label:"CREATING"}),RUNNING:e.exports.createElement(f,{color:"primary",label:"RUNNING"}),UPDATING:e.exports.createElement(f,{color:"secondary",label:"UPDATING"}),DELETING:e.exports.createElement(f,{style:{backgroundColor:"red"},label:"DELETING"}),UNKNOWN:e.exports.createElement(f,{style:{backgroundColor:"purple"},label:"UNKNOWN"})},la=r=>{const{deployment:t}=r;return e.exports.createElement("div",{style:{paddingTop:"15px"}},na[t.status]||null)},ia=r=>{const{deployment:t}=r;return e.exports.createElement(hs,{variant:"contained",color:"primary",style:{bottom:3,right:3,position:"absolute"},to:t.link,disabled:t.status!=="RUNNING"},"Launch \u{1F680}")},Ge=({icon:r,label:t,value:s})=>s===void 0?null:e.exports.createElement(w,{item:!0,xs:4},e.exports.createElement(f,{icon:r,label:t+s})),ca=r=>{const{deployment:t}=r,{cpuCount:s,memoryCount:o,storageCount:a}=t;return e.exports.createElement(w,{container:!0,style:{paddingTop:"20px"}},e.exports.createElement(Ge,{icon:e.exports.createElement(Je,null),label:"CPU: ",value:s}),e.exports.createElement(Ge,{icon:e.exports.createElement(Ze,null),label:"RAM: ",value:o}),e.exports.createElement(Ge,{icon:e.exports.createElement(ye,null),label:"Storage: ",value:a}))},pa=c(r=>{const{deployment:t}=r,{routerstore:s,uistore:o}=m();return e.exports.createElement("div",{style:{position:"absolute",top:"2%",right:"2%"}},e.exports.createElement(_e,{options:[{name:"Edit",onClick:()=>{s.push(t.link+"/edit")}},{name:"Info",onClick:()=>{s.push(t.link+"/info")}},{name:"Delete",onClick:()=>{o.setDeleteTarget(t.name,t.delete.call)}}]}))}),ua=r=>{const{deployment:t}=r;return e.exports.createElement(Ur,{style:{width:"400px",minWidth:"400px",height:"256px",padding:"20px",position:"relative"}},e.exports.createElement(g,{variant:"h4",color:"primary",noWrap:!0},t.name),e.exports.createElement(pa,{deployment:t}),e.exports.createElement(la,{deployment:t}),e.exports.createElement(ca,{deployment:t}),e.exports.createElement(ia,{deployment:t}))},ma=c(({workspace:r})=>(console.log(r.deployments),e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(w,{container:!0,direction:"row",spacing:5,alignItems:"flex-start",justify:"flex-start"},r.deployments.map(t=>e.exports.createElement(w,{item:!0,key:t.id},e.exports.createElement(ua,{deployment:t}))))))),da="_textarea_1m4mx_1";var ha={textarea:da};const xa={FAILED:e.exports.createElement(f,{style:{backgroundColor:"red"},label:"Error"}),SUCCESS:e.exports.createElement(f,{style:{backgroundColor:"red"},label:"Error"}),STARTING:e.exports.createElement(f,{style:{backgroundColor:"red"},label:"Error"}),PENDING:e.exports.createElement(f,{color:"secondary",label:"PENDING"}),CREATING:e.exports.createElement(f,{color:"secondary",label:"CREATING"}),RUNNING:e.exports.createElement(f,{color:"primary",label:"RUNNING"}),UPDATING:e.exports.createElement(f,{color:"secondary",label:"UPDATING"}),DELETING:e.exports.createElement(f,{style:{backgroundColor:"red"},label:"DELETING"}),UNKNOWN:e.exports.createElement(f,{style:{backgroundColor:"purple"},label:"UNKNOWN"})},ga=r=>{const{deployment:t}=r;return e.exports.createElement("div",{style:{paddingTop:"15px"}},xa[t.status]||null)},Ea=c(r=>{const{deployment:t}=r;if(!t)return null;const o=t.logs.logs;return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(g,{variant:"h4"},"Logs"),e.exports.createElement("textarea",{className:ha.textarea,disabled:!0,value:o}))}),Jt=r=>e.exports.createElement(w,{item:!0,style:{width:"100%",height:"37vh"}},r.children),wa=c(r=>{const{deployment:t}=r;if(!t)return null;const s=t==null?void 0:t.metrics;return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(g,{variant:"h4"},"Metrics"),e.exports.createElement(w,{container:!0,item:!0,direction:"column"},e.exports.createElement(Jt,null,e.exports.createElement(ae,x({},s.cpuChart))),e.exports.createElement(Jt,null,e.exports.createElement(ae,x({},s.memoryChart)))))}),ka=r=>{const{deployment:t}=r,s=t.data.failureReason;return t.status==="FAILED"?e.exports.createElement(ht,{severity:"error"},s):null},ya=c(r=>{const{workspacesstore:t}=m(),s=t.selectedDeployment;return s?e.exports.createElement(j,null,e.exports.createElement(g,{variant:"h3"},"Deployment: ",s.name),e.exports.createElement(g,{variant:"h6"},e.exports.createElement(ga,{deployment:s}),e.exports.createElement("br",null),e.exports.createElement(ka,{deployment:s}),e.exports.createElement("br",null)),e.exports.createElement("div",{style:{height:"60vh",display:"block"}},e.exports.createElement(w,{container:!0,direction:"row"},e.exports.createElement(w,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3},e.exports.createElement(wa,{deployment:s})),e.exports.createElement(w,{item:!0,xs:12,sm:6,md:6,lg:9,xl:9},e.exports.createElement(Ea,{deployment:s}))))):null}),fa=D(r=>({margin:{margin:r.spacing(1,0,1,0)},description:{paddingTop:"10px",paddingBottom:"5px"}})),ba=c(r=>{const t=fa(),{workspacesstore:s}=m(),o=s.workspaces.createWorkspaceForm;return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(g,{variant:"h4"},"Create Workspace"),e.exports.createElement(g,{variant:"body1",className:t.description},"Please fill out the form below and press 'Create' to create a workspace."),e.exports.createElement(E,{autoFocus:!0,form:o,className:t.margin,margin:"dense",id:"name",label:"Workspace Name",type:"text",fullWidth:!0}),e.exports.createElement(C,null,"Resources"),e.exports.createElement(g,{variant:"body1",className:t.description},"Optionally, specify the maximum amount of resources the workspace can use."),e.exports.createElement(me,{form:o}),e.exports.createElement($,{form:o}))}),Ca=c(()=>{const{workspacesstore:r,uistore:t}=m(),s=r.workspaces,o=r.selectedWorkspace;return o?e.exports.createElement(j,null,e.exports.createElement(ma,{workspace:o}),e.exports.createElement(ds,{link:`${s.workspaceUrl}/new`})):null}),Pa=r=>{const{metrics:t}=r;return t.state==="error"?e.exports.createElement(ht,{severity:"error"},"This workspace has no configured resource limitations!"):null},va=c(r=>{const{workspacesstore:t}=m(),s=t.selectedWorkspace;if(!s)return null;const o=s==null?void 0:s.metrics;return e.exports.createElement(j,null,e.exports.createElement(g,{variant:"h4"},s.name," Metrics"),e.exports.createElement("br",null),e.exports.createElement(Pa,{metrics:o}),e.exports.createElement("br",null),e.exports.createElement(w,{container:!0,spacing:4},e.exports.createElement(w,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},e.exports.createElement(ae,x({},o.cpuChart))),e.exports.createElement(w,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},e.exports.createElement(ae,x({},o.memoryChart))),e.exports.createElement(w,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},e.exports.createElement(ae,x({},o.storageChart)))))}),Sa=()=>e.exports.createElement(Tt,null,e.exports.createElement(ba,null)),Wa=c(r=>{const{workspacesstore:t}=m(),{workspaces:s}=t;if(console.log("WorkspaceRedirect",s),s.state!="loaded")return null;const o=t.selectedWorkspace;return o?e.exports.createElement(J,{to:o.link}):e.exports.createElement(J,{to:"/w/new"})}),Da=c(r=>{const{workspacesstore:t,uistore:s}=m(),o=t.selectedWorkspace;if(!o)return null;const a=o.updateWorkspace;return e.exports.createElement(j,null,e.exports.createElement(g,{variant:"h4"},"Update Workspace"),e.exports.createElement(C,null,"Workspace Name"),e.exports.createElement(E,{form:a,id:"name",label:"Workspace Name",autoComplete:"off"}),e.exports.createElement(C,null,"Resources"),e.exports.createElement(g,{variant:"body1"},"Specify the maximum amount of resources the deployment can use:"),e.exports.createElement(me,{form:a}),e.exports.createElement(ps,{form:a}),e.exports.createElement("div",{style:{float:"left"}},e.exports.createElement(S,{onClick:async()=>{s.setDeleteTarget(o.name,o.onDelete)},color:"secondary"},"Delete")),e.exports.createElement("div",{style:{float:"right"}},e.exports.createElement($,{form:a,labels:["Cancel","Edit"]})))}),Zt="/w/:wid/admin/",Ra=()=>e.exports.createElement(j,null,e.exports.createElement(re,null,e.exports.createElement(O,{path:`${Zt}users`,component:Zs}),e.exports.createElement(O,{path:`${Zt}`,component:Ks}))),Ua="_sidebar_161eo_1",_a="_topsidebar_161eo_9",Ia="_nested_161eo_13",Na="_editorWrapper_161eo_1",Fa="_wrapper_161eo_1";var le={sidebar:Ua,topsidebar:_a,nested:Ia,editorWrapper:Na,wrapper:Fa};const Ta=c(r=>{const{page:t}=r,{workspacesstore:s}=m(),o=t.pageForm;return s.wikiEdit?e.exports.createElement(xt,{value:o.get("title"),onChange:o.onChange("title"),style:{fontSize:"3rem",letterSpacing:"0rem"}}):e.exports.createElement(g,{variant:"h3",style:{paddingTop:7}},o.get("title"))}),Oa=c(r=>{const{page:t}=r,s=t.pageForm;return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(qt,{page:t}),e.exports.createElement("div",{id:le.editorWrapper},e.exports.createElement(_r,{language:"markdown",value:s.get("body"),loading:e.exports.createElement("div",null),onChange:(o,a)=>{!o||s.onChange("body")(o)},options:{wordWrap:"on",lineNumbers:"off",wrappingIndent:"indent"}})))}),Aa=r=>{const{page:t}=r,s=t.pageForm;return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(qt,{page:t}),e.exports.createElement(Nr,{source:s.get("body")}))},Ma=c(r=>{const{workspacesstore:t}=m(),s=t.selectedWikiPage;return s==null?e.exports.createElement("div",{id:le.wrapper},"Wiki page not found"):e.exports.createElement("div",{id:le.wrapper},t.wikiEdit?e.exports.createElement(Oa,{page:s}):e.exports.createElement(Aa,{page:s}))}),qt=r=>{const{page:t}=r;return e.exports.createElement(w,{container:!0},e.exports.createElement(w,{item:!0,xs:9,sm:11},e.exports.createElement(Ta,{page:t})),e.exports.createElement(w,{item:!0,xs:3,sm:1},e.exports.createElement(R,{onClick:t.onSave},e.exports.createElement(Ir,null))))},$a=D(r=>({root:{display:"flex",flexDirection:"column",width:360},lists:{backgroundColor:r.palette.background.paper,marginTop:r.spacing(1)},nested:{paddingLeft:r.spacing(6)},selected:{paddingLeft:r.spacing(6),backgroundColor:"#e3e3e3"}})),La=c(r=>{var d;const{page:t}=r,s=$a(),{uistore:o,workspacesstore:a}=m(),l=[{label:"Delete",onClick:()=>{o.setDeleteTarget(t.data.title,t.onDelete)}}],i=((d=a.selectedWikiPage)==null?void 0:d.id)===t.id;return e.exports.createElement("li",null,e.exports.createElement(bt,{menuItems:l},e.exports.createElement(ue,{button:!0,component:_,to:t.link,className:i?s.selected:s.nested},e.exports.createElement(Ce,{primary:t.data.title}))))}),Ba=c(r=>{const{section:t,open:s,onClick:o}=r,a=t.sectionForm,{uistore:l}=m();console.log(t.id);const i=[{label:"Delete",onClick:()=>{l.setDeleteTarget(t.data.name,()=>{console.log(t.id),t.onDelete()})}}],d=p=>{p.key==="Enter"&&t.onSubmitNameChange()};return e.exports.createElement(ue,null,e.exports.createElement(Ce,null,e.exports.createElement(bt,{menuItems:i},e.exports.createElement(xt,{value:a.get("name"),onChange:a.onChange("name"),onKeyDown:d}))),e.exports.createElement(ve,{title:"Add Page To Section","aria-label":"Add Page To Section"},e.exports.createElement(R,{onClick:t.wikiPages.onAddPage},e.exports.createElement(fe,{color:"primary"}))),e.exports.createElement("div",null,e.exports.createElement(R,{onClick:o},s?e.exports.createElement(Fr,null):e.exports.createElement(Tr,null))))}),ja=c(r=>{var p;const{section:t}=r,{workspacesstore:s}=m(),o=((p=s.selectedWikiSection)==null?void 0:p.id)===t.id,a=t.wikiPages,[l,i]=e.exports.useState(!1);e.exports.useEffect(()=>{i(o||l)},[o]);const d=()=>{i(!l)};return e.exports.createElement(e.exports.Fragment,null,e.exports.createElement(Ba,{section:t,open:l,onClick:d}),e.exports.createElement(Or,{component:"li",in:l,timeout:"auto",unmountOnExit:!0},e.exports.createElement(K,{disablePadding:!0},a.map(k=>e.exports.createElement(La,{key:k.id,page:k})))))}),Ga=c(r=>{const{workspacesstore:t}=m(),s=t.selectedWorkspace;if(!s)return null;const o=s.wikiSections,a=t.selectedWikiPage;return e.exports.createElement("div",{className:le.sidebar},e.exports.createElement("div",{className:le.topsidebar},e.exports.createElement(ue,null,e.exports.createElement(Ar,{placeholder:"Search..."}),e.exports.createElement(ve,{title:"Add Section","aria-label":"Add Section"},e.exports.createElement(R,{onClick:o.onAddSection},e.exports.createElement(fe,{color:"primary"}))),e.exports.createElement(ve,{title:"Edit Selected Wiki Page","aria-label":"Edit Selected Wiki Page"},e.exports.createElement(R,{color:"primary",disabled:a==null,onClick:()=>{t.wikiEdit=!t.wikiEdit}},e.exports.createElement(Mr,null))))),e.exports.createElement(K,null,o.map(l=>e.exports.createElement(ja,{key:l.id,section:l}))))}),Va=()=>null,Ka=()=>null,Ve="/w/:wid/wiki/",Ha=()=>e.exports.createElement(Ft,null,e.exports.createElement(Ga,null),e.exports.createElement(re,null,e.exports.createElement(O,{path:`${Ve}:sectionId/pages/:pageId`,component:Ma}),e.exports.createElement(O,{path:`${Ve}:sectionId/pages`,component:Va}),e.exports.createElement(O,{path:`${Ve}`,component:Ka}))),za=({history:r})=>e.exports.createElement($r,{history:r},e.exports.createElement(re,null,e.exports.createElement(ne,{path:"/login",component:xo}),e.exports.createElement(ne,{path:"/signup",component:go}),e.exports.createElement(ne,{path:"/forgotPassword",component:ho}),e.exports.createElement(ne,{path:"/verify-account",component:Eo}),e.exports.createElement(ne,{path:"/change-password",component:mo})),e.exports.createElement(qo,null,e.exports.createElement(re,null,e.exports.createElement(I,{path:"/logout",component:uo}),e.exports.createElement(I,{path:"/w/new",component:Sa}),e.exports.createElement(N,{path:"/w/:wid/new",component:Xo}),e.exports.createElement(N,{path:"/w/:wid/wiki",component:Ha}),e.exports.createElement(N,{path:"/w/:wid/metrics",component:va}),e.exports.createElement(N,{path:"/w/:wid/admin",component:Ra}),e.exports.createElement(N,{path:"/w/:wid/edit",component:Da}),e.exports.createElement(N,{path:"/w/:wid/d/:did/info",component:ya}),e.exports.createElement(N,{path:"/w/:wid/d/:did/edit",component:oa}),e.exports.createElement(N,{path:"/w/:wid/d/:did/",component:sa}),e.exports.createElement(N,{path:"/w/:wid",component:Ca}),e.exports.createElement(I,{path:"/admin",component:Bs}),e.exports.createElement(N,{path:"/edit-profile",component:po}),e.exports.createElement(N,{path:"/",component:Wa})))),Ya=Lr({palette:{primary:{main:"#2196f3",light:"#4dabf5",dark:"#1769aa",contrastText:"#fff"},secondary:{main:"#ff9100",light:"#ffa733",dark:"#b26500",contrastText:"#000"}},overrides:{MuiAvatar:{root:{backgroundColor:"#ff9100"}},MuiButton:{root:{margin:"20px"}}}});Br({isolateGlobalState:!0,enforceActions:"never"});jr.exports.render(e.exports.createElement(Gr,{theme:Ya},e.exports.createElement(Vr,x({},Le.stores),e.exports.createElement(za,{history:Ht}),e.exports.createElement(zs,null))),document.getElementById("root"));
